b'CiNMaWJyYXJ5CmZyb20gZ2V0bWFjIGltcG9ydCBnZXRfbWFjX2FkZHJlc3MgYXMgZ21hOyBmcm9tIEJPVCBpbXBvcnQgc2xpZGUsIGNsaWNrO2Zyb20gY3R5cGVzIGltcG9ydCB3aW5kbGw7ZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXA7ZnJvbSB1cmxsaWIucmVxdWVzdCBpbXBvcnQgdXJsb3BlbiAgCmZyb20gdHFkbSBpbXBvcnQgdHFkbTtmcm9tIHRraW50ZXIgaW1wb3J0ICo7ZnJvbSB0a2ludGVyIGltcG9ydCB0dGs7ZnJvbSBQSUwgaW1wb3J0IEltYWdlT3BzCmltcG9ydCBweXRlc3NlcmFjdC5weXRlc3NlcmFjdCxweWF1dG9ndWksb3MscHlnZXR3aW5kb3csUElMLkltYWdlLHB5dGVzc2VyYWN0LHRpbWUsZ2xvYix3aW4zMmd1aSx3aW4zMnVpLHRocmVhZGluZyxzeXMscmFuZG9tO2ltcG9ydCB0a2ludGVyIGFzIHRrCmltcG9ydCBweWFybW9yCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBNYWluIENvZGUjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAKCiNUYW1hbmhvIFRlbGEKeHNpemUseXNpemUgPSBweWF1dG9ndWkuc2l6ZSgpCgojU3RhdHVzKFNhZmUsQ09NTikKIyAtPlJJR0hULCAgRE9XTiwgTEVGVCwgVVAgCmRlZiByZWNhbGN1bGFyKCk6ICAKICAgICMxOTIweDEwODAgIAogICAgaWYgeHNpemUgPT0gMTkyMCBhbmQgeXNpemUgPT0gMTA4MDoKICAgICAgICByZWNhbGN1bGFyLmExID0gMTUwMwogICAgICAgIHJlY2FsY3VsYXIuYjEgPSAxMjgKICAgICAgICByZWNhbGN1bGFyLmMxID0gMzY4CiAgICAgICAgcmVjYWxjdWxhci5kMSA9IDg0OAoKICAgICMxMzY2eDc2OCAgCiAgICBlbGlmIHhzaXplID09IDEzNjYgYW5kIHlzaXplID09IDc2ODoKICAgICAgICByZWNhbGN1bGFyLmExID0gMTA3NQogICAgICAgIHJlY2FsY3VsYXIuYjEgPSA4OQogICAgICAgIHJlY2FsY3VsYXIuYzEgPSAyNTQKICAgICAgICByZWNhbGN1bGFyLmQxID0gNTg0ICAgICAgICAKCiAgICAjMTM2MHg3NjggIAogICAgZWxpZiB4c2l6ZSA9PSAxMzYwIGFuZCB5c2l6ZSA9PSA3Njg6CiAgICAgICAgcmVjYWxjdWxhci5hMSA9IDEwNjAKICAgICAgICByZWNhbGN1bGFyLmIxID0gODkKICAgICAgICByZWNhbGN1bGFyLmMxID0gMjQ0CiAgICAgICAgcmVjYWxjdWxhci5kMSA9IDU4NAoKICAgICMxMjgweDcyMCAKICAgIGVsaWYgeHNpemUgPT0gMTI4MCBhbmQgeXNpemUgPT0gNzIwOgogICAgICAgIHJlY2FsY3VsYXIuYTEgPSAxMDA1CiAgICAgICAgcmVjYWxjdWxhci5iMSA9IDg0CiAgICAgICAgcmVjYWxjdWxhci5jMSA9IDIzNwogICAgICAgIHJlY2FsY3VsYXIuZDEgPSA1NTMKICAgIAogICAgIzExNzZ4NjY0IAogICAgZWxpZiB4c2l6ZSA9PSAxMTc2IGFuZCB5c2l6ZSA9PSA2NjQ6CiAgICAgICAgcmVjYWxjdWxhci5hMSA9IDkyNQogICAgICAgIHJlY2FsY3VsYXIuYjEgPSA3NwogICAgICAgIHJlY2FsY3VsYXIuYzEgPSAyMTgKICAgICAgICByZWNhbGN1bGFyLmQxID0gNTA2ICAgICAgICAgICAgCgogICAgI01haW9yIHF1ZSAxOTIweDEwODAKICAgIGVsaWYgeHNpemUgPjE5MjAgYW5kIHlzaXplID4xMDgwOgogICAgICAgIHBhc3MKCiAgICBlbHNlOiAgICAgICAgCiAgICAgICAgcmVjYWxjdWxhci5hMSA9IDAgICAKICAgICAgICByZWNhbGN1bGFyLmIxID0gMAogICAgICAgIHJlY2FsY3VsYXIuYzEgPSAwCiAgICAgICAgcmVjYWxjdWxhci5kMSA9IDAgIAoKI1N0YXR1cyhQZWRpcikKIyAtPlJJR0hULCAgRE9XTiwgTEVGVCwgVVAgCmRlZiByZWNhbGN1bGFyMSgpOiAgCiAgICAjMTkyMHgxMDgwICAKICAgIGlmIHhzaXplID09IDE5MjAgYW5kIHlzaXplID09IDEwODA6CiAgICAgICAgcmVjYWxjdWxhcjEuYTEgPSA3MQogICAgICAgIHJlY2FsY3VsYXIxLmIxID0gODIzCiAgICAgICAgcmVjYWxjdWxhcjEuYzEgPSAxNTkyCiAgICAgICAgcmVjYWxjdWxhcjEuZDEgPSAxMDQKCiAgICAjMTM2Nng3NjggIAogICAgZWxpZiB4c2l6ZSA9PSAxMzY2IGFuZCB5c2l6ZSA9PSA3Njg6CiAgICAgICAgcmVjYWxjdWxhcjEuYTEgPSA1MQogICAgICAgIHJlY2FsY3VsYXIxLmIxID0gNTczCiAgICAgICAgcmVjYWxjdWxhcjEuYzEgPSAxMTQxCiAgICAgICAgcmVjYWxjdWxhcjEuZDEgPSA3NiAgICAgICAgCgogICAgIzEzNjB4NzY4ICAKICAgIGVsaWYgeHNpemUgPT0gMTM2MCBhbmQgeXNpemUgPT0gNzY4OgogICAgICAgIHJlY2FsY3VsYXIxLmExID0gNDcKICAgICAgICByZWNhbGN1bGFyMS5iMSA9IDU2NAogICAgICAgIHJlY2FsY3VsYXIxLmMxID0gMTEzNQogICAgICAgIHJlY2FsY3VsYXIxLmQxID0gNzYKCiAgICAjMTI4MHg3MjAgCiAgICBlbGlmIHhzaXplID09IDEyODAgYW5kIHlzaXplID09IDcyMDoKICAgICAgICByZWNhbGN1bGFyMS5hMSA9IDQ2CiAgICAgICAgcmVjYWxjdWxhcjEuYjEgPSA1MzUKICAgICAgICByZWNhbGN1bGFyMS5jMSA9IDEwNjYKICAgICAgICByZWNhbGN1bGFyMS5kMSA9IDUyCiAgICAKICAgICMxMTc2eDY2NCAKICAgIGVsaWYgeHNpemUgPT0gMTE3NiBhbmQgeXNpemUgPT0gNjY0OgogICAgICAgIHJlY2FsY3VsYXIxLmExID0gNDEKICAgICAgICByZWNhbGN1bGFyMS5iMSA9IDQ5MgogICAgICAgIHJlY2FsY3VsYXIxLmMxID0gOTYyCiAgICAgICAgcmVjYWxjdWxhcjEuZDEgPSA2NiAgICAgICAgICAgIAoKICAgICNNYWlvciBxdWUgMTkyMHgxMDgwCiAgICBlbGlmIHhzaXplID4xOTIwIGFuZCB5c2l6ZSA+MTA4MDoKICAgICAgICBwYXNzCgogICAgZWxzZTogICAgICAgIAogICAgICAgIHJlY2FsY3VsYXIxLmExID0gMCAgIAogICAgICAgIHJlY2FsY3VsYXIxLmIxID0gMAogICAgICAgIHJlY2FsY3VsYXIxLmMxID0gMAogICAgICAgIHJlY2FsY3VsYXIxLmQxID0gMCAgCgojU3RhdHVzIE1pbmVyYW5kby1Nb3ZlbmRvICAgCmRlZiByZWNhbGN1bGFyMigpOiAgCiAgICAjMTkyMHgxMDgwICAKICAgIGlmIHhzaXplID09IDE5MjAgYW5kIHlzaXplID09IDEwODA6CiAgICAgICAgcmVjYWxjdWxhcjIuYTEgPSA4MzAKICAgICAgICByZWNhbGN1bGFyMi5iMSA9IDcwMQogICAgICAgIHJlY2FsY3VsYXIyLmMxID0gMTAxNwogICAgICAgIHJlY2FsY3VsYXIyLmQxID0gMjc3CgpkZWYgcmVjYWxjdWxhcjMoKToKICAgICMxOTIweDEwODAgIAogICAgaWYgeHNpemUgPT0gMTkyMCBhbmQgeXNpemUgPT0gMTA4MDoKICAgICAgICByZWNhbGN1bGFyMy5hMSA9IDgwNAogICAgICAgIHJlY2FsY3VsYXIzLmIxID0gNjk1CiAgICAgICAgcmVjYWxjdWxhcjMuYzEgPSAxMDc4CiAgICAgICAgcmVjYWxjdWxhcjMuZDEgPSAyNzIKCiNNb3VzZVNsaWRlCmRlZiBtb3ZlcihhLGIpOgogICAgc2NyZWVuY2FsY3ggPSAoYSAqIDEwMCkvIDE5MjAKICAgIHhyZXN1bHQgPSAoc2NyZWVuY2FsY3ggKiB4c2l6ZSkgLyAxMDAgCiAgICBhID0gaW50KHhyZXN1bHQpCiAgICBzY3JlZW5jYWxjeSA9IChiICogMTAwKS8gMTA4MAogICAgeXJlc3VsdCA9IChzY3JlZW5jYWxjeSAqIHlzaXplKSAvIDEwMCAKICAgIGIgPSBpbnQoeXJlc3VsdCkKICAgIHNsaWRlKGEsYikKCiNHZXRUZXNzZXJhY3QKaWYgZ2V0YXR0cihzeXMsICdmcm96ZW4nLCBGYWxzZSk6CiAgICBfcGF0aCA9IG9zLnBhdGguam9pbihzeXMuX01FSVBBU1MsICcuL1Rlc3NlcmFjdC90ZXNzZXJhY3QuZXhlJykKICAgIHB5dGVzc2VyYWN0LnB5dGVzc2VyYWN0LnRlc3NlcmFjdF9jbWQgPV9wYXRoCiAgICAjIHRoZSAuZXhlIHdpbGwgbG9vayBoZXJlCmVsc2U6ICAgIAogICAgcHl0ZXNzZXJhY3QucHl0ZXNzZXJhY3QudGVzc2VyYWN0X2NtZCA9IHIiQzpcXFByb2dyYW0gRmlsZXMgKHg4NilcXFRlc3NlcmFjdFwJZXNzZXJhY3QuZXhlIgogICAgI3J1dGEgZG9uZGUgc2UgZW5jdWVudHJlIHN1IHRyZXNzZXJhY3QgICAgCgojVmFyaWF2ZWlzIEdsb2JhaXMKdGl0bGUgPSBweWdldHdpbmRvdy5nZXRBbGxUaXRsZXMoKQpnbG9iYWwgYW5hbGlzZWQKYW5hbGlzZWQgPSBGYWxzZQpnbG9iYWwgTWluaW5nZwpNaW5pbmdnID0gRmFsc2UKZ2xvYmFsIG1vdmluZwptb3ZpbmcgPSBGYWxzZQoKZ2xvYmFsIGFsdGVyYWRvcgphbHRlcmFkb3IgPSAwCiNNYWNybyAtIE1haW5Cb2R5CmRlZiBTdGFydCgpOgogICAgZXhlY3V0YW5kbyA9IFRydWUgCiAgICB0ZWxhID0gaW50KHJhZGlvX3ZhbG9yLmdldCgpKSAKICAgIHRyeTogICAgCiAgICAgICAgd2hpbGUgZXhlY3V0YW5kbyA9PSBUcnVlOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHJvb3QudXBkYXRlKCkgICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHRlbGEgPT0gMTogCiAgICAgICAgICAgICAgICB0cnk6ICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBweWF1dG9ndWkuZ2V0V2luZG93c1dpdGhUaXRsZSgnTWlyNEdbMV0nKVswXSAKICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJUZWxhIE1pcjRHWzFdIFwKRVNUQSBTRU5ETyBDQVBUVVJBREEiCiAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETy4uLiIgIAogICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZy5kZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICBlcnJvTXNnWyJ0ZXh0Il0gPSBmIlVNIEVSUk8gT0NPUlJFVSEhISBcClwKSk9HTzEgTsODTyBFTkNPTlRSQURPIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICIiICAKICAgICAgICAgICAgZWxpZiB0ZWxhID09IDI6ICAgICAKICAgICAgICAgICAgICAgIHRyeTogICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRpdHVsbzEgPSBweWF1dG9ndWkuZ2V0V2luZG93c1dpdGhUaXRsZSgnTWlyNEdbMl0nKVswXSAKICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJUZWxhIE1pcjRHWzJdIFwKRVNUQSBTRU5ETyBDQVBUVVJBREEiCiAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETy4uLiIgIAogICAgICAgICAgICAgICAgICAgIHRpdHVsbzEubWF4aW1pemUoKSAKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnLmRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgIGVycm9Nc2dbInRleHQiXSA9IGYiVU0gRVJSTyBPQ09SUkVVISEhIFwKXApKT0dPMiBOw4NPIEVOQ09OVFJBRE8iICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIiIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZWxpZiB0ZWxhID09IDM6CiAgICAgICAgICAgICAgICB0cnk6ICAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gcHlhdXRvZ3VpLmdldFdpbmRvd3NXaXRoVGl0bGUoJ01pcjRHWzFdJylbMF0KICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMSA9IHB5YXV0b2d1aS5nZXRXaW5kb3dzV2l0aFRpdGxlKCdNaXI0R1syXScpWzBdICAgIAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJUZWxhcyBNaXI0R1sxXSBlIFsyXSBcCkVTVMODTyBTRU5ETyBDQVBUVVJBREFTIgogICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSAiTUFDUk8gU0VORE8gRVhFQ1VUQURPLi4uIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2cuZGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgZXJyb01zZ1sidGV4dCJdID0gZiJVTSBFUlJPIE9DT1JSRVUhISEgXApcClRFTEFTIDEgb3UgMiBOw4NPIEVOQ09OVFJBREFTIiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICIiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgI1NlIGFjaGFyIGFzIGphbmVsYXMgZXhlY3V0YXIgY29kaWdvCiAgICAgICAgICAgIGlmIHRlbGEgPT0gMToKICAgICAgICAgICAgICAgIGlmIHRpdHVsbzogICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaHduZCA9IHdpbjMyZ3VpLkZpbmRXaW5kb3coTm9uZSwgJ01pcjRHWzFdJykgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxlZnQsIHRvcCwgcmlnaHQsIGJvdCA9IHdpbjMyZ3VpLkdldENsaWVudFJlY3QoaHduZCkKICAgICAgICAgICAgICAgICAgICB3ID0gcmlnaHQgLSBsZWZ0CiAgICAgICAgICAgICAgICAgICAgaCA9IGJvdCAtIHRvcAogICAgICAgICAgICAgICAgICAgIGh3bmREQyA9IHdpbjMyZ3VpLkdldFdpbmRvd0RDKGh3bmQpCiAgICAgICAgICAgICAgICAgICAgbWZjREMgID0gd2luMzJ1aS5DcmVhdGVEQ0Zyb21IYW5kbGUoaHduZERDKQogICAgICAgICAgICAgICAgICAgIHNhdmVEQyA9IG1mY0RDLkNyZWF0ZUNvbXBhdGlibGVEQygpCiAgICAgICAgICAgICAgICAgICAgc2F2ZUJpdE1hcCA9IHdpbjMydWkuQ3JlYXRlQml0bWFwKCkKICAgICAgICAgICAgICAgICAgICBzYXZlQml0TWFwLkNyZWF0ZUNvbXBhdGlibGVCaXRtYXAobWZjREMsIHcsIGgpCiAgICAgICAgICAgICAgICAgICAgc2F2ZURDLlNlbGVjdE9iamVjdChzYXZlQml0TWFwKQogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHdpbmRsbC51c2VyMzIuUHJpbnRXaW5kb3coaHduZCwgc2F2ZURDLkdldFNhZmVIZGMoKSwgMykgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgYm1waW5mbyA9IHNhdmVCaXRNYXAuR2V0SW5mbygpCiAgICAgICAgICAgICAgICAgICAgYm1wc3RyID0gc2F2ZUJpdE1hcC5HZXRCaXRtYXBCaXRzKFRydWUpCiAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBQSUwuSW1hZ2UuZnJvbWJ1ZmZlcignUkdCJywgKGJtcGluZm9bJ2JtV2lkdGgnXSwgYm1waW5mb1snYm1IZWlnaHQnXSksIGJtcHN0ciwgJ3JhdycsICdCR1JYJywgMCwgMSkgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBkYXRhID0gaW1hZ2UubG9hZCgpCiAgICAgICAgICAgICAgICAgICAgd2luMzJndWkuRGVsZXRlT2JqZWN0KHNhdmVCaXRNYXAuR2V0SGFuZGxlKCkpCiAgICAgICAgICAgICAgICAgICAgc2F2ZURDLkRlbGV0ZURDKCkKICAgICAgICAgICAgICAgICAgICBtZmNEQy5EZWxldGVEQygpCiAgICAgICAgICAgICAgICAgICAgd2luMzJndWkuUmVsZWFzZURDKGh3bmQsIGh3bmREQykKICAgICAgICAgICAgICAgICAgICBjYW1pbmhvID0gKG9zLnBhdGguZGlybmFtZShvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSkpICsgJy9hLycgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiByZXN1bHQgPT0gMTogCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMyA9IGltYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMiA9IGltYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMSA9IGltYWdlICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBpbWFnZQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgIyAtPlJJR0hULCAgRE9XTiwgTEVGVCwgVVAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FsY3VsYXIoKSAgIAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIgPSAocmVjYWxjdWxhci5hMSwgcmVjYWxjdWxhci5iMSxyZWNhbGN1bGFyLmMxLHJlY2FsY3VsYXIuZDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMSA9IEltYWdlT3BzLmNyb3AoaW1hZ2UxLCBib3JkZXIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTEuc2F2ZShjYW1pbmhvICsgIjMucG5nIikgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FsY3VsYXIxKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyMSA9IChyZWNhbGN1bGFyMS5hMSwgcmVjYWxjdWxhcjEuYjEsIHJlY2FsY3VsYXIxLmMxLCByZWNhbGN1bGFyMS5kMSkgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IEltYWdlT3BzLmNyb3AoaW1hZ2UsIGJvcmRlcjEpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zYXZlKGNhbWluaG8gKyAiMS5wbmciKSAgCgogICAgICAgICAgICAgICAgICAgICAgICByZWNhbGN1bGFyMigpICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjIgPSAocmVjYWxjdWxhcjIuYTEsIHJlY2FsY3VsYXIyLmIxLCByZWNhbGN1bGFyMi5jMSwgcmVjYWxjdWxhcjIuZDEpICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UyID0gSW1hZ2VPcHMuY3JvcChpbWFnZTIsIGJvcmRlcjIpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTIuc2F2ZShjYW1pbmhvICsgIjQucG5nIikgCgogICAgICAgICAgICAgICAgICAgICAgICByZWNhbGN1bGFyMygpIAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIzID0gKHJlY2FsY3VsYXIzLmExLCByZWNhbGN1bGFyMy5iMSwgcmVjYWxjdWxhcjMuYzEsIHJlY2FsY3VsYXIzLmQxKSAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMyA9IEltYWdlT3BzLmNyb3AoaW1hZ2UzLCBib3JkZXIzKSAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UzLnNhdmUoY2FtaW5obyArICI1LnBuZyIpIAoKICAgICAgICAgICAgICAgICAgICBvcy5jaGRpcihjYW1pbmhvKQogICAgICAgICAgICAgICAgICAgIGZvciBmaWxlIGluIGdsb2IuZ2xvYigiMS5wbmciKTogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUgPSBmaWxlICAKICAgICAgICAgICAgICAgICAgICBmb3IgZmlsZTEgaW4gZ2xvYi5nbG9iKCIzLnBuZyIpOiAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUxID0gZmlsZTEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBNaW5pbmdnID09IFRydWU6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTQ6ICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgNCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09MzogIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2Rlc2xpZ2FkbycsIDApICAgICAKICAgICAgICAgICAgICAgICAgICBpbWFnZW0xID0gUElMLkltYWdlLm9wZW4oZmlsZTEpICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25maWcgPSAocictLW9lbSAzIC0tcHNtIDExJykKICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gcHl0ZXNzZXJhY3QuaW1hZ2VfdG9fc3RyaW5nKGltYWdlbTEsIGNvbmZpZz1jb25maWcpCiAgICAgICAgICAgICAgICAgICAgYiA9IHRleHQKICAgICAgICAgICAgICAgICAgICBiID0gYi5sb3dlcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpbWFnZW0gPSBQSUwuSW1hZ2Uub3BlbihmaWxlKSAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gKHInLS1vZW0gMyAtLXBzbSAxMScpCiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHB5dGVzc2VyYWN0LmltYWdlX3RvX3N0cmluZyhpbWFnZW0sIGNvbmZpZz1jb25maWcpCiAgICAgICAgICAgICAgICAgICAgYSA9IHRleHQKICAgICAgICAgICAgICAgICAgICBhID0gYS5sb3dlcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGIuX19jb250YWluc19fKCJzYWZlIik6CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETyBFTSBNaXI0R1sxXSIKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC51cGRhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWluaW1pemUoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1heGltaXplKCkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggdHFkbSh0b3RhbD0xMDApIGFzIGJhcnJhX3Byb2dyZXNzbzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHlhdXRvZ3VpLnByZXNzKCdmMTAnKSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTQ6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgNCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09MzogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCAzKSAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICdWYWxlIGRhcyBzZXJwZW50ZXMgT2N1bHRvJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQwMiw1MDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTQ6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgNCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09MzogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBiLl9fY29udGFpbnNfXygiY29tbiIpOiAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGx2cyA9PSAxKSBvciAobHZzID09IDIpIG9yIChsdnMgPT0gMyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0YXJ0KCkgCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETyBFTSBNaXI0R1sxXSIKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC51cGRhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWluaW1pemUoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggdHFkbSh0b3RhbD0xMDApIGFzIGJhcnJhX3Byb2dyZXNzbzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHlhdXRvZ3VpLnByZXNzKCdmMTAnKSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09NDogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCA0KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0zOiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDMpICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gJ1ZhbGUgZGFzIHNlcnBlbnRlcyBPY3VsdG8nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDAyLDUwMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09NDogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCA0KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0zOiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgYS5fX2NvbnRhaW5zX18oInBlZGlyIik6CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETyBFTSBNaXI0R1sxXSIKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1pbmltaXplKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1heGltaXplKCkgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRxZG0odG90YWw9MTAwKSBhcyBiYXJyYV9wcm9ncmVzc286CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE1OTQsODg0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMTApICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT00OiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTM6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgMykgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWFwYSA9PSAnVmFsZSBkYXMgc2VycGVudGVzIE9jdWx0byc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MDIsNTAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT00OiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTM6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIlRlbGEgTWlyNEdbMV0gXApFU1RBIFNFTkRPIENBUFRVUkFEQSIKICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSAiTUFDUk8gU0VORE8gRVhFQ1VUQURPLi4uIgogICAgICAgICAgICBpZiB0ZWxhID09IDI6CiAgICAgICAgICAgICAgICBpZiB0aXR1bG8xOiAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBod25kID0gd2luMzJndWkuRmluZFdpbmRvdyhOb25lLCAnTWlyNEdbMl0nKSAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbGVmdCwgdG9wLCByaWdodCwgYm90ID0gd2luMzJndWkuR2V0Q2xpZW50UmVjdChod25kKQogICAgICAgICAgICAgICAgICAgIHcgPSByaWdodCAtIGxlZnQKICAgICAgICAgICAgICAgICAgICBoID0gYm90IC0gdG9wCiAgICAgICAgICAgICAgICAgICAgaHduZERDID0gd2luMzJndWkuR2V0V2luZG93REMoaHduZCkKICAgICAgICAgICAgICAgICAgICBtZmNEQyAgPSB3aW4zMnVpLkNyZWF0ZURDRnJvbUhhbmRsZShod25kREMpCiAgICAgICAgICAgICAgICAgICAgc2F2ZURDID0gbWZjREMuQ3JlYXRlQ29tcGF0aWJsZURDKCkKICAgICAgICAgICAgICAgICAgICBzYXZlQml0TWFwID0gd2luMzJ1aS5DcmVhdGVCaXRtYXAoKQogICAgICAgICAgICAgICAgICAgIHNhdmVCaXRNYXAuQ3JlYXRlQ29tcGF0aWJsZUJpdG1hcChtZmNEQywgdywgaCkKICAgICAgICAgICAgICAgICAgICBzYXZlREMuU2VsZWN0T2JqZWN0KHNhdmVCaXRNYXApCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gd2luZGxsLnVzZXIzMi5QcmludFdpbmRvdyhod25kLCBzYXZlREMuR2V0U2FmZUhkYygpLCAzKSAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGJtcGluZm8gPSBzYXZlQml0TWFwLkdldEluZm8oKQogICAgICAgICAgICAgICAgICAgIGJtcHN0ciA9IHNhdmVCaXRNYXAuR2V0Qml0bWFwQml0cyhUcnVlKQogICAgICAgICAgICAgICAgICAgIGltYWdlID0gUElMLkltYWdlLmZyb21idWZmZXIoJ1JHQicsIChibXBpbmZvWydibVdpZHRoJ10sIGJtcGluZm9bJ2JtSGVpZ2h0J10pLCBibXBzdHIsICdyYXcnLCAnQkdSWCcsIDAsIDEpICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGltYWdlLmxvYWQoKQogICAgICAgICAgICAgICAgICAgIHdpbjMyZ3VpLkRlbGV0ZU9iamVjdChzYXZlQml0TWFwLkdldEhhbmRsZSgpKQogICAgICAgICAgICAgICAgICAgIHNhdmVEQy5EZWxldGVEQygpCiAgICAgICAgICAgICAgICAgICAgbWZjREMuRGVsZXRlREMoKSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB3aW4zMmd1aS5SZWxlYXNlREMoaHduZCwgaHduZERDKSAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY2FtaW5obyA9IChvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpKSArICcvYS8nICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiByZXN1bHQgPT0gMTogIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTMgPSBpbWFnZQogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTIgPSBpbWFnZQogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTEgPSBpbWFnZSAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gaW1hZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAjIC0+UklHSFQsICBET1dOLCBMRUZULCBVUCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgcmVjYWxjdWxhcigpICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlciA9IChyZWNhbGN1bGFyLmExLCByZWNhbGN1bGFyLmIxLHJlY2FsY3VsYXIuYzEscmVjYWxjdWxhci5kMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UxID0gSW1hZ2VPcHMuY3JvcChpbWFnZTEsIGJvcmRlcikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMS5zYXZlKGNhbWluaG8gKyAiMy5wbmciKSAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgcmVjYWxjdWxhcjEoKSAgIAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIxID0gKHJlY2FsY3VsYXIxLmExLCByZWNhbGN1bGFyMS5iMSwgcmVjYWxjdWxhcjEuYzEsIHJlY2FsY3VsYXIxLmQxKSAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gSW1hZ2VPcHMuY3JvcChpbWFnZSwgYm9yZGVyMSkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLnNhdmUoY2FtaW5obyArICIxLnBuZyIpICAKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FsY3VsYXIyKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyMiA9IChyZWNhbGN1bGFyMi5hMSwgcmVjYWxjdWxhcjIuYjEsIHJlY2FsY3VsYXIyLmMxLCByZWNhbGN1bGFyMi5kMSkgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTIgPSBJbWFnZU9wcy5jcm9wKGltYWdlMiwgYm9yZGVyMikgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMi5zYXZlKGNhbWluaG8gKyAiNC5wbmciKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FsY3VsYXIzKCkgCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjMgPSAocmVjYWxjdWxhcjMuYTEsIHJlY2FsY3VsYXIzLmIxLCByZWNhbGN1bGFyMy5jMSwgcmVjYWxjdWxhcjMuZDEpICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UzID0gSW1hZ2VPcHMuY3JvcChpbWFnZTMsIGJvcmRlcjMpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTMuc2F2ZShjYW1pbmhvICsgIjUucG5nIikgCgogICAgICAgICAgICAgICAgICAgIGlmIE1pbmluZ2cgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09NDogIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCA0KQogICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0zOiAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnZGVzbGlnYWRvJywgMCkgICAgIAogICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIG9zLmNoZGlyKGNhbWluaG8pCiAgICAgICAgICAgICAgICAgICAgZm9yIGZpbGUgaW4gZ2xvYi5nbG9iKCIxLnBuZyIpOiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGZpbGUgIAogICAgICAgICAgICAgICAgICAgIGZvciBmaWxlMSBpbiBnbG9iLmdsb2IoIjMucG5nIik6ICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTEgPSBmaWxlMSAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGltYWdlbTEgPSBQSUwuSW1hZ2Uub3BlbihmaWxlMSkgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IChyJy0tb2VtIDMgLS1wc20gMTEnKQogICAgICAgICAgICAgICAgICAgIHRleHQgPSBweXRlc3NlcmFjdC5pbWFnZV90b19zdHJpbmcoaW1hZ2VtMSwgY29uZmlnPWNvbmZpZykKICAgICAgICAgICAgICAgICAgICBiID0gdGV4dAogICAgICAgICAgICAgICAgICAgIGIgPSBiLmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGltYWdlbSA9IFBJTC5JbWFnZS5vcGVuKGZpbGUpICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25maWcgPSAocictLW9lbSAzIC0tcHNtIDExJykKICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gcHl0ZXNzZXJhY3QuaW1hZ2VfdG9fc3RyaW5nKGltYWdlbSwgY29uZmlnPWNvbmZpZykKICAgICAgICAgICAgICAgICAgICBhID0gdGV4dAogICAgICAgICAgICAgICAgICAgIGEgPSBhLmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBiLl9fY29udGFpbnNfXygic2FmZSIpOgogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8gRU0gTWlyNEdbMl0iCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QudXBkYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMS5taW5pbWl6ZSgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbzEubWF4aW1pemUoKSAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCB0cWRtKHRvdGFsPTEwMCkgYXMgYmFycmFfcHJvZ3Jlc3NvOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBweWF1dG9ndWkucHJlc3MoJ2YxMCcpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWFwYSA9PSAiVmFsZSBvY3VsdG8gZGUgQmljaGVvbiI6ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE1NzgsODQ0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTQ6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgNCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09MzogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICdWYWxlIGRhcyBzZXJwZW50ZXMgT2N1bHRvJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQwMiw1MDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT00OiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTM6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBiLl9fY29udGFpbnNfXygiY29tbiIpOiAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGx2cyA9PSAxKSBvciAobHZzID09IDIpIG9yIChsdnMgPT0gMyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0YXJ0KCkgCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETyBFTSBNaXI0R1syXSIKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC51cGRhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1pbmltaXplKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbzEubWF4aW1pemUoKSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRxZG0odG90YWw9MTAwKSBhcyBiYXJyYV9wcm9ncmVzc286CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICJWYWxlIG9jdWx0byBkZSBCaWNoZW9uIjogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTU3OCw4NDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTQ6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgNCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09MzogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWFwYSA9PSAnVmFsZSBkYXMgc2VycGVudGVzIE9jdWx0byc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MDIsNTAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT00OiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTM6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGEuX19jb250YWluc19fKCJwZWRpciIpOgogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8gRU0gTWlyNEdbMl0iCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbzEubWluaW1pemUoKSAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1heGltaXplKCkgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRxZG0odG90YWw9MTAwKSBhcyBiYXJyYV9wcm9ncmVzc286CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE1OTQsODg0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMTApICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT00OiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTM6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gJ1ZhbGUgZGFzIHNlcnBlbnRlcyBPY3VsdG8nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDAyLDUwMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09NDogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCA0KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0zOiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiVGVsYSBNaXI0R1syXSBcCkVTVEEgU0VORE8gQ0FQVFVSQURBIgogICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8uLi4iICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHRlbGEgPT0gMzogIAogICAgICAgICAgICAgICAgdGl0dWxvLm1heGltaXplKCkKICAgICAgICAgICAgICAgIHRpdHVsbzEubWF4aW1pemUoKSAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiB0aXR1bG8xOiAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBod25kID0gd2luMzJndWkuRmluZFdpbmRvdyhOb25lLCAnTWlyNEdbMl0nKSAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbGVmdCwgdG9wLCByaWdodCwgYm90ID0gd2luMzJndWkuR2V0Q2xpZW50UmVjdChod25kKQogICAgICAgICAgICAgICAgICAgIHcgPSByaWdodCAtIGxlZnQKICAgICAgICAgICAgICAgICAgICBoID0gYm90IC0gdG9wCiAgICAgICAgICAgICAgICAgICAgaHduZERDID0gd2luMzJndWkuR2V0V2luZG93REMoaHduZCkKICAgICAgICAgICAgICAgICAgICBtZmNEQyAgPSB3aW4zMnVpLkNyZWF0ZURDRnJvbUhhbmRsZShod25kREMpCiAgICAgICAgICAgICAgICAgICAgc2F2ZURDID0gbWZjREMuQ3JlYXRlQ29tcGF0aWJsZURDKCkKICAgICAgICAgICAgICAgICAgICBzYXZlQml0TWFwID0gd2luMzJ1aS5DcmVhdGVCaXRtYXAoKQogICAgICAgICAgICAgICAgICAgIHNhdmVCaXRNYXAuQ3JlYXRlQ29tcGF0aWJsZUJpdG1hcChtZmNEQywgdywgaCkKICAgICAgICAgICAgICAgICAgICBzYXZlREMuU2VsZWN0T2JqZWN0KHNhdmVCaXRNYXApCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gd2luZGxsLnVzZXIzMi5QcmludFdpbmRvdyhod25kLCBzYXZlREMuR2V0U2FmZUhkYygpLCAzKSAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGJtcGluZm8gPSBzYXZlQml0TWFwLkdldEluZm8oKQogICAgICAgICAgICAgICAgICAgIGJtcHN0ciA9IHNhdmVCaXRNYXAuR2V0Qml0bWFwQml0cyhUcnVlKQogICAgICAgICAgICAgICAgICAgIGltYWdlID0gUElMLkltYWdlLmZyb21idWZmZXIoJ1JHQicsIChibXBpbmZvWydibVdpZHRoJ10sIGJtcGluZm9bJ2JtSGVpZ2h0J10pLCBibXBzdHIsICdyYXcnLCAnQkdSWCcsIDAsIDEpICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGltYWdlLmxvYWQoKQogICAgICAgICAgICAgICAgICAgIHdpbjMyZ3VpLkRlbGV0ZU9iamVjdChzYXZlQml0TWFwLkdldEhhbmRsZSgpKQogICAgICAgICAgICAgICAgICAgIHNhdmVEQy5EZWxldGVEQygpCiAgICAgICAgICAgICAgICAgICAgbWZjREMuRGVsZXRlREMoKSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB3aW4zMmd1aS5SZWxlYXNlREMoaHduZCwgaHduZERDKQogICAgICAgICAgICAgICAgICAgIGNhbWluaG8gPSAob3MucGF0aC5kaXJuYW1lKG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pKSkgKyAnL2EvJyAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgcmVzdWx0ID09IDE6ICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UxID0gaW1hZ2UgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IGltYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMSA9IGltYWdlMSAKICAgICAgICAgICAgICAgICAgICAgICAgIyAtPlJJR0hULCAgRE9XTiwgTEVGVCwgVVAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FsY3VsYXIoKSAgIAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIgPSAocmVjYWxjdWxhci5hMSwgcmVjYWxjdWxhci5iMSxyZWNhbGN1bGFyLmMxLHJlY2FsY3VsYXIuZDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMSA9IEltYWdlT3BzLmNyb3AoaW1hZ2UxLCBib3JkZXIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTEuc2F2ZShjYW1pbmhvICsgIjMucG5nIikgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FsY3VsYXIxKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyMSA9IChyZWNhbGN1bGFyMS5hMSwgcmVjYWxjdWxhcjEuYjEsIHJlY2FsY3VsYXIxLmMxLCByZWNhbGN1bGFyMS5kMSkgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IEltYWdlT3BzLmNyb3AoaW1hZ2UsIGJvcmRlcjEpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zYXZlKGNhbWluaG8gKyAiMS5wbmciKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgb3MuY2hkaXIoY2FtaW5obykKICAgICAgICAgICAgICAgICAgICBmb3IgZmlsZSBpbiBnbG9iLmdsb2IoIjEucG5nIik6ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZSAgCiAgICAgICAgICAgICAgICAgICAgZm9yIGZpbGUxIGluIGdsb2IuZ2xvYigiMy5wbmciKTogICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlMSA9IGZpbGUxIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaW1hZ2VtMSA9IFBJTC5JbWFnZS5vcGVuKGZpbGUxKSAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gKHInLS1vZW0gMyAtLXBzbSAxMScpCiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHB5dGVzc2VyYWN0LmltYWdlX3RvX3N0cmluZyhpbWFnZW0xLCBjb25maWc9Y29uZmlnKQogICAgICAgICAgICAgICAgICAgIGIgPSB0ZXh0CiAgICAgICAgICAgICAgICAgICAgYiA9IGIubG93ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaW1hZ2VtID0gUElMLkltYWdlLm9wZW4oZmlsZSkgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IChyJy0tb2VtIDMgLS1wc20gMTEnKQogICAgICAgICAgICAgICAgICAgIHRleHQgPSBweXRlc3NlcmFjdC5pbWFnZV90b19zdHJpbmcoaW1hZ2VtLCBjb25maWc9Y29uZmlnKQogICAgICAgICAgICAgICAgICAgIGEgPSB0ZXh0CiAgICAgICAgICAgICAgICAgICAgYSA9IGEubG93ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGIuX19jb250YWluc19fKCJzYWZlIik6CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETyBFTSBNaXI0R1syXSIKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC51cGRhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1pbmltaXplKCkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5taW5pbWl6ZSgpICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1heGltaXplKCkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggdHFkbSh0b3RhbD0xMDApIGFzIGJhcnJhX3Byb2dyZXNzbzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHlhdXRvZ3VpLnByZXNzKCdmMTAnKSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWFwYSA9PSAnVmFsZSBkYXMgc2VycGVudGVzIE9jdWx0byc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MDIsNTAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWF4aW1pemUoKSAKICAgICAgICAgICAgICAgICAgICBpZiBiLl9fY29udGFpbnNfXygiY29tbiIpOiAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGx2cyA9PSAxKSBvciAobHZzID09IDIpIG9yIChsdnMgPT0gMyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0YXJ0KCkgCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETyBFTSBNaXI0R1syXSIKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC51cGRhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1pbmltaXplKCkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5taW5pbWl6ZSgpICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1heGltaXplKCkgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCB0cWRtKHRvdGFsPTEwMCkgYXMgYmFycmFfcHJvZ3Jlc3NvOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBweWF1dG9ndWkucHJlc3MoJ2YxMCcpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWFwYSA9PSAiVmFsZSBvY3VsdG8gZGUgQmljaGVvbiI6ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE1NzgsODQ0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gJ1ZhbGUgZGFzIHNlcnBlbnRlcyBPY3VsdG8nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDAyLDUwMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1heGltaXplKCkgCiAgICAgICAgICAgICAgICAgICAgaWYgYS5fX2NvbnRhaW5zX18oInBlZGlyIik6ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiTUFDUk8gU0VORE8gRVhFQ1VUQURPIEVNIE1pcjRHWzJdIgogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1pbmltaXplKCkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5taW5pbWl6ZSgpICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1heGltaXplKCkgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRxZG0odG90YWw9MTAwKSBhcyBiYXJyYV9wcm9ncmVzc286CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE1OTQsODg0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMTApICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gJ1ZhbGUgZGFzIHNlcnBlbnRlcyBPY3VsdG8nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDAyLDUwMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1heGltaXplKCkgCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiVGVsYXMgTWlyNEdbMV0gfCBNaXI0R1syXSBcCkVTVMODTyBTRU5ETyBDQVBUVVJBREFTIgogICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8uLi4iICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICNNaXI0IFsxXSAgICAKICAgICAgICAgICAgICAgIGlmIHRpdHVsbzogICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaHduZCA9IHdpbjMyZ3VpLkZpbmRXaW5kb3coTm9uZSwgJ01pcjRHWzFdJykgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxlZnQsIHRvcCwgcmlnaHQsIGJvdCA9IHdpbjMyZ3VpLkdldENsaWVudFJlY3QoaHduZCkKICAgICAgICAgICAgICAgICAgICB3ID0gcmlnaHQgLSBsZWZ0CiAgICAgICAgICAgICAgICAgICAgaCA9IGJvdCAtIHRvcAogICAgICAgICAgICAgICAgICAgIGh3bmREQyA9IHdpbjMyZ3VpLkdldFdpbmRvd0RDKGh3bmQpCiAgICAgICAgICAgICAgICAgICAgbWZjREMgID0gd2luMzJ1aS5DcmVhdGVEQ0Zyb21IYW5kbGUoaHduZERDKQogICAgICAgICAgICAgICAgICAgIHNhdmVEQyA9IG1mY0RDLkNyZWF0ZUNvbXBhdGlibGVEQygpCiAgICAgICAgICAgICAgICAgICAgc2F2ZUJpdE1hcCA9IHdpbjMydWkuQ3JlYXRlQml0bWFwKCkKICAgICAgICAgICAgICAgICAgICBzYXZlQml0TWFwLkNyZWF0ZUNvbXBhdGlibGVCaXRtYXAobWZjREMsIHcsIGgpCiAgICAgICAgICAgICAgICAgICAgc2F2ZURDLlNlbGVjdE9iamVjdChzYXZlQml0TWFwKQogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHdpbmRsbC51c2VyMzIuUHJpbnRXaW5kb3coaHduZCwgc2F2ZURDLkdldFNhZmVIZGMoKSwgMykgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgYm1waW5mbyA9IHNhdmVCaXRNYXAuR2V0SW5mbygpCiAgICAgICAgICAgICAgICAgICAgYm1wc3RyID0gc2F2ZUJpdE1hcC5HZXRCaXRtYXBCaXRzKFRydWUpCiAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBQSUwuSW1hZ2UuZnJvbWJ1ZmZlcignUkdCJywgKGJtcGluZm9bJ2JtV2lkdGgnXSwgYm1waW5mb1snYm1IZWlnaHQnXSksIGJtcHN0ciwgJ3JhdycsICdCR1JYJywgMCwgMSkgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBkYXRhID0gaW1hZ2UubG9hZCgpCiAgICAgICAgICAgICAgICAgICAgd2luMzJndWkuRGVsZXRlT2JqZWN0KHNhdmVCaXRNYXAuR2V0SGFuZGxlKCkpCiAgICAgICAgICAgICAgICAgICAgc2F2ZURDLkRlbGV0ZURDKCkKICAgICAgICAgICAgICAgICAgICBtZmNEQy5EZWxldGVEQygpCiAgICAgICAgICAgICAgICAgICAgd2luMzJndWkuUmVsZWFzZURDKGh3bmQsIGh3bmREQykKICAgICAgICAgICAgICAgICAgICBjYW1pbmhvID0gKG9zLnBhdGguZGlybmFtZShvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSkpICsgJy9hLycgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiByZXN1bHQgPT0gMTogIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTEgPSBpbWFnZSAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gaW1hZ2UKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UxID0gaW1hZ2UxIAogICAgICAgICAgICAgICAgICAgICAgICAjIC0+UklHSFQsICBET1dOLCBMRUZULCBVUCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgcmVjYWxjdWxhcigpICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlciA9IChyZWNhbGN1bGFyLmExLCByZWNhbGN1bGFyLmIxLHJlY2FsY3VsYXIuYzEscmVjYWxjdWxhci5kMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UxID0gSW1hZ2VPcHMuY3JvcChpbWFnZTEsIGJvcmRlcikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMS5zYXZlKGNhbWluaG8gKyAiMy5wbmciKSAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgcmVjYWxjdWxhcjEoKSAgIAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIxID0gKHJlY2FsY3VsYXIxLmExLCByZWNhbGN1bGFyMS5iMSwgcmVjYWxjdWxhcjEuYzEsIHJlY2FsY3VsYXIxLmQxKSAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gSW1hZ2VPcHMuY3JvcChpbWFnZSwgYm9yZGVyMSkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLnNhdmUoY2FtaW5obyArICIxLnBuZyIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBvcy5jaGRpcihjYW1pbmhvKQogICAgICAgICAgICAgICAgICAgIGZvciBmaWxlIGluIGdsb2IuZ2xvYigiMS5wbmciKTogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUgPSBmaWxlICAKICAgICAgICAgICAgICAgICAgICBmb3IgZmlsZTEgaW4gZ2xvYi5nbG9iKCIzLnBuZyIpOiAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUxID0gZmlsZTEgCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaW1hZ2VtMSA9IFBJTC5JbWFnZS5vcGVuKGZpbGUxKSAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gKHInLS1vZW0gMyAtLXBzbSAxMScpCiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHB5dGVzc2VyYWN0LmltYWdlX3RvX3N0cmluZyhpbWFnZW0xLCBjb25maWc9Y29uZmlnKQogICAgICAgICAgICAgICAgICAgIGIgPSB0ZXh0CiAgICAgICAgICAgICAgICAgICAgYiA9IGIubG93ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaW1hZ2VtID0gUElMLkltYWdlLm9wZW4oZmlsZSkgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IChyJy0tb2VtIDMgLS1wc20gMTEnKQogICAgICAgICAgICAgICAgICAgIHRleHQgPSBweXRlc3NlcmFjdC5pbWFnZV90b19zdHJpbmcoaW1hZ2VtLCBjb25maWc9Y29uZmlnKQogICAgICAgICAgICAgICAgICAgIGEgPSB0ZXh0CiAgICAgICAgICAgICAgICAgICAgYSA9IGEubG93ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBiLl9fY29udGFpbnNfXygic2FmZSIpOgogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8gRU0gTWlyNEdbMV0iCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QudXBkYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1pbmltaXplKCkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbzEubWluaW1pemUoKSAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1heGltaXplKCkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggdHFkbSh0b3RhbD0xMDApIGFzIGJhcnJhX3Byb2dyZXNzbzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHlhdXRvZ3VpLnByZXNzKCdmMTAnKSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWFwYSA9PSAnVmFsZSBkYXMgc2VycGVudGVzIE9jdWx0byc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MDIsNTAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpIAogICAgICAgICAgICAgICAgICAgIGlmIGIuX19jb250YWluc19fKCJjb21uIik6IAogICAgICAgICAgICAgICAgICAgICAgICBpZiAobHZzID09IDEpIG9yIChsdnMgPT0gMikgb3IgKGx2cyA9PSAzKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RhcnQoKSAKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiTUFDUk8gU0VORE8gRVhFQ1VUQURPIEVNIE1pcjRHWzFdIgogICAgICAgICAgICAgICAgICAgICAgICByb290LnVwZGF0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5taW5pbWl6ZSgpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1pbmltaXplKCkgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggdHFkbSh0b3RhbD0xMDApIGFzIGJhcnJhX3Byb2dyZXNzbzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHlhdXRvZ3VpLnByZXNzKCdmMTAnKSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICdWYWxlIGRhcyBzZXJwZW50ZXMgT2N1bHRvJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQwMiw1MDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1heGltaXplKCkgCiAgICAgICAgICAgICAgICAgICAgaWYgYS5fX2NvbnRhaW5zX18oInBlZGlyIik6CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETyBFTSBNaXI0R1sxXSIKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1pbmltaXplKCkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbzEubWluaW1pemUoKSAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1heGltaXplKCkgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRxZG0odG90YWw9MTAwKSBhcyBiYXJyYV9wcm9ncmVzc286CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE1OTQsODg0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMTApICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gJ1ZhbGUgZGFzIHNlcnBlbnRlcyBPY3VsdG8nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDAyLDUwMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbzEubWF4aW1pemUoKSAKICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJUZWxhcyBNaXI0R1sxXSB8IE1pcjRHWzJdIFwKRVNUw4NPIFNFTkRPIENBUFRVUkFEQVMiCiAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETy4uLiIgICAgICAgICAgICAgICAgICAgCgoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcm9kYW5kb01zZy5kZXN0cm95KCkKICAgICAgICBlcnJvTXNnWyJ0ZXh0Il0gPSBmIlVNIEVSUk8gT0NPUlJFVSEhISBcClwKe2V4fSIgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIiIKCiNNaW5pbmdDaGVjawpkZWYgTWluaW5nKGVzdGFkbywgZmxvb3IpOiAgIAogICAgZ2xvYmFsIE1pbmluZ2cKICAgIE1pbmluZ2cgPSBUcnVlICAKICAgIGlmIHhzaXplID09IDE5MjAgYW5kIHlzaXplID09IDEwODA6IAogICAgICAgICNDaGVjayBNaW5pbmcgICAgICAKICAgICAgICBjYW1pbmhvID0gKG9zLnBhdGguZGlybmFtZShvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSkpICsgJy9hLycgIAogICAgICAgIG1pbmVfaW1hZ2UgPSBQSUwuSW1hZ2Uub3BlbihjYW1pbmhvICsgIjQucG5nIikgICAgICAgCiAgICAgICAgY29uZmlnID0gKHInLS1vZW0gMyAtLXBzbSAxMScpCiAgICAgICAgdGV4dDMgPSBweXRlc3NlcmFjdC5pbWFnZV90b19zdHJpbmcobWluZV9pbWFnZSwgY29uZmlnPWNvbmZpZykKICAgICAgICBNaW5pbmluZ09yTm90ID0gdGV4dDMKICAgICAgICBNaW5pbmluZ09yTm90ID0gTWluaW5pbmdPck5vdC5sb3dlcigpCiAgICAgICAgI0NoZWNrIFdhbGtpbmcKICAgICAgICBtaW5lX2ltYWdlMSA9IFBJTC5JbWFnZS5vcGVuKGNhbWluaG8gKyAiNS5wbmciKSAgICAgICAKICAgICAgICB0ZXh0NCA9IHB5dGVzc2VyYWN0LmltYWdlX3RvX3N0cmluZyhtaW5lX2ltYWdlMSwgY29uZmlnPWNvbmZpZykKICAgICAgICBXYWxraW5nT3JOb3QgPSB0ZXh0NAogICAgICAgIFdhbGtpbmdPck5vdCA9IFdhbGtpbmdPck5vdC5sb3dlcigpICAgICAgICAgICAgICAgIAogICAgICAgIGlmIGVzdGFkbyA9PSAnbGlnYWRvJzogICAgICAgICAgICAgCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICBpZiAoTWluaW5pbmdPck5vdC5fX2NvbnRhaW5zX18oIm1pbmVyYXIiKSkgb3IgKE1pbmluaW5nT3JOb3QuX19jb250YWluc19fKCJtaW5lcmFsIikpOiAgIAogICAgICAgICAgICAgICAgZ2xvYmFsIGFuYWxpc2VkIAogICAgICAgICAgICAgICAgYW5hbGlzZWQgPSBGYWxzZQogICAgICAgICAgICBlbHNlOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBhbmFsaXNlZCA9PSBGYWxzZTogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMTApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgYW5hbGlzZWQgPSBUcnVlICAgICAKICAgICAgICAgICAgICAgIGVsc2U6ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsIG1vdmluZyAKICAgICAgICAgICAgICAgICAgICBhbmFsaXNlZCA9IEZhbHNlCiAgICAgICAgICAgICAgICAgICAgaWYgZmxvb3IgPT0gNDogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbW92aW5nID09IFRydWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoV2Fsa2luZ09yTm90Ll9fY29udGFpbnNfXygiYWYiKSkgb3IgKFdhbGtpbmdPck5vdC5fX2NvbnRhaW5zX18oIjRmIikpOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gRmFsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcG90czQgPSBbMSwyLDMsNCw1LDYsNyw4LDldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9vc2VTcG90ID0gcmFuZG9tLmNob2ljZShzcG90czQpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWwgYWx0ZXJhZG9yICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaG9vc2VTcG90ID09IGFsdGVyYWRvcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9vc2VTcG90ID0gcmFuZG9tLmNob2ljZShzcG90czQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0ZXJhZG9yID0gY2hvb3NlU3BvdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDU2Niw3MjkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNTY4LDY4NSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSAyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoOTQyLDU5NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg5MzMsNTY3KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gVHJ1ZSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gMzogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg2ODMsNTA4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDY3OCw0NjMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSA0OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDY3Nyw2MzgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNjc5LDU5NCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaG9vc2VTcG90ID09IDU6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNTU2LDYzMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg1NDgsNTg2KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gVHJ1ZSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gNjogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg3NjksNTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDc2Niw1MDYpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSA3OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDQ5NSw2NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNDk0LDYwNykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gODogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg0NjMsNTM1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDQ2MSw0OTApIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSA5OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDcxNCw0NzgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNzEyLDQzNCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAKICAgICAgICAgICAgICAgICAgICBpZiBmbG9vciA9PSAzOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1vdmluZyA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFdhbGtpbmdPck5vdC5fX2NvbnRhaW5zX18oImVmIikpIG9yIChXYWxraW5nT3JOb3QuX19jb250YWluc19fKCIzZiIpKTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IEZhbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6ICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBweWF1dG9ndWkucHJlc3MoJ2YxMCcpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BvdHM0ID0gWzEsMiwzLDQsNSw2LDcsOCw5XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvb3NlU3BvdCA9IHJhbmRvbS5jaG9pY2Uoc3BvdHM0KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaG9vc2VTcG90ID09IGFsdGVyYWRvcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9vc2VTcG90ID0gcmFuZG9tLmNob2ljZShzcG90czQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0ZXJhZG9yID0gY2hvb3NlU3BvdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDQ0Niw1NjQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNDQ3LDUwOCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSAyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNTE2LDY2NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg1MTEsNjE4KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gVHJ1ZSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gMzogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg2MTMsNzM2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDYxMCw2OTYpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSA0OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDg1OCw2NzgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoODYwLDYzMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaG9vc2VTcG90ID09IDU6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoODIwLDQ5MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg4MTcsNDUwKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gVHJ1ZSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gNjogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg1OTYsMzMyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDU5NywyODgpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSA3OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDg5NywzNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoODk2LDMwOSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gODogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg4NzksNjk5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDg2OCw2NTYpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSA5OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDg2NSw1NjYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoODU4LDUxNCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAojSU5URVJGQUNFIFBSSU5DSVBBTApjbGFzcyBBcHBsaWNhdGlvbjogCiAgICBkZWYgX19pbml0X18oc2VsZiwgbWFzdGVyPU5vbmUpOgoKICAgICNMQVlPVVQgRE8gR1VJIElOVEVSRkFDRSBQUklOQ0lQQUwKICAgICAgICAgICAgIzHCuiBDb250YWluZXIgICAgICAKICAgICAgICAgICAgbGFiZWxfaW1hZ2VtID0gTGFiZWwocm9vdCwgaW1hZ2U9aW1nKS5wYWNrKHBhZHg9MTAsIHBhZHk9MTApIAogICAgICAgICAgICBzZWxmLmZvbnRlUGFkcmFvID0gKCJBcmlhbCIsICI4IiwgImJvbGQiKQogICAgICAgICAgICBnbG9iYWwgZm9udGVQYWRyYW8xCiAgICAgICAgICAgIGZvbnRlUGFkcmFvMSA9ICgiRnV0dXJhIiwgIjEwIiwgImJvbGQiKSAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYucHJpbWVpcm9Db250YWluZXIgPSBGcmFtZShtYXN0ZXIpCiAgICAgICAgICAgIHNlbGYucHJpbWVpcm9Db250YWluZXJbInBhZHkiXSA9IDEwCiAgICAgICAgICAgIHNlbGYucHJpbWVpcm9Db250YWluZXIucGFjaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgI1JhZGlvQnV0dG9ucwogICAgICAgICAgICBzZWxmLnJhZGlvID0gRnJhbWUobWFzdGVyKQogICAgICAgICAgICBzZWxmLnJhZGlvWyJwYWR4Il0gPSAxMAogICAgICAgICAgICBzZWxmLnJhZGlvWyJwYWR5Il0gPSAxMCAgICAgIAogICAgICAgICAgICBzZWxmLnJhZGlvLnBhY2soKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLnJhZGlvMSA9IEZyYW1lKG1hc3RlcikKICAgICAgICAgICAgc2VsZi5yYWRpbzFbInBhZHgiXSA9IDAgICAgIAogICAgICAgICAgICBzZWxmLnJhZGlvMVsicGFkeSJdID0gMTAgICAgICAKICAgICAgICAgICAgc2VsZi5yYWRpbzEucGFjaygpIAogICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi5yYWRpbzIgPSBGcmFtZShtYXN0ZXIpCiAgICAgICAgICAgIHNlbGYucmFkaW8yWyJwYWR4Il0gPSAxMCAgICAgCiAgICAgICAgICAgIHNlbGYucmFkaW8yWyJwYWR5Il0gPSAxMCAgICAgIAogICAgICAgICAgICBzZWxmLnJhZGlvMi5wYWNrKCkgICAgICAKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLnJhZGlvMyA9IEZyYW1lKG1hc3RlcikKICAgICAgICAgICAgc2VsZi5yYWRpbzNbInBhZHgiXSA9IDEwICAgICAKICAgICAgICAgICAgc2VsZi5yYWRpbzNbInBhZHkiXSA9IDAgICAgICAKICAgICAgICAgICAgc2VsZi5yYWRpbzMucGFjaygpICAgICAgCgogICAgICAgICAgICBzZWxmLnJhZGlvNCA9IEZyYW1lKG1hc3RlcikKICAgICAgICAgICAgc2VsZi5yYWRpbzRbInBhZHgiXSA9IDEwICAgIAogICAgICAgICAgICBzZWxmLnJhZGlvNFsicGFkeSJdID0gMTAgICAgIAogICAgICAgICAgICBzZWxmLnJhZGlvNC5wYWNrKCkgICAgICAgICAKICAgICAgIAogICAgICAgICAgICAjMsK6IENvbnRhaW5lcgogICAgICAgICAgICBzZWxmLnNlZ3VuZG9Db250YWluZXIgPSBGcmFtZShtYXN0ZXIpCiAgICAgICAgICAgIHNlbGYuc2VndW5kb0NvbnRhaW5lclsicGFkeCJdID0gMTAKICAgICAgICAgICAgc2VsZi5zZWd1bmRvQ29udGFpbmVyLnBhY2soKQoKICAgICAgICAgICAgIzPCuiBDb250YWluZXIKICAgICAgICAgICAgc2VsZi50ZXJjZWlyb0NvbnRhaW5lciA9IEZyYW1lKG1hc3RlcikKICAgICAgICAgICAgc2VsZi50ZXJjZWlyb0NvbnRhaW5lclsicGFkeCJdID0gMTAKICAgICAgICAgICAgc2VsZi50ZXJjZWlyb0NvbnRhaW5lclsicGFkeSJdID0gMTAKICAgICAgICAgICAgc2VsZi50ZXJjZWlyb0NvbnRhaW5lci5wYWNrKCkKICAgICAgICAgICAgCiAgICAgICAgICAgICM0wrogQ29udGFpbmVyCiAgICAgICAgICAgIHNlbGYucXVhcnRvQ29udGFpbmVyID0gRnJhbWUobWFzdGVyKSAgICAgICAgCiAgICAgICAgICAgIHNlbGYucXVhcnRvQ29udGFpbmVyWyJwYWR5Il0gPSAxMAogICAgICAgICAgICBzZWxmLnF1YXJ0b0NvbnRhaW5lci5wYWNrKCkKICAgICAgICAgCiAgICAgICAgI0ZJTSBMQVlPVVQgSU5URVJGQUNFIFBSSU5DSVBBTCAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICNJbnRlcmZhY2UgUHJpbmNpcGFsCiAgICAgICAgICAgIHNlbGYudGl0dWxvID0gTGFiZWwoc2VsZi5wcmltZWlyb0NvbnRhaW5lciwgdGV4dD0iTUlSNCBEUkFDTyBNSU5FUiIpCiAgICAgICAgICAgIHNlbGYudGl0dWxvWyJmb250Il0gPSAoIkZ1dHVyYSIsICIxMiIsICJib2xkIikKICAgICAgICAgICAgc2VsZi50aXR1bG8ucGFjaygpCgogICAgICAgICAgICBzZWxmLnRpdHVsbyA9IExhYmVsKHNlbGYucmFkaW8sIHRleHQ9IlNFTEVDSU9ORSBBQkFJWE8gT05ERSBPIE1BQ1JPIElSw4EgUk9EQVIiKQogICAgICAgICAgICBzZWxmLnRpdHVsb1siZm9udCJdID0gKCJBcmlhbCIsICI4IiwgImJvbGQiKSAKICAgICAgICAgICAgc2VsZi50aXR1bG8ucGFjaygpCiAgICAgICAgICAgIAogICAgICAgICAgICBnbG9iYWwgcmFkaW9fdmFsb3IKICAgICAgICAgICAgcmFkaW9fdmFsb3IgPSBJbnRWYXIoKQogICAgICAgICAgICBzZWxmLmJ0bjEgPSB0dGsuUmFkaW9idXR0b24oc2VsZi5yYWRpbyx2YXJpYWJsZT0gcmFkaW9fdmFsb3IsIHRleHQ9J0pPR08xJywgdmFsdWU9MSwpCiAgICAgICAgICAgIHNlbGYuYnRuMiA9IHR0ay5SYWRpb2J1dHRvbihzZWxmLnJhZGlvLHZhcmlhYmxlPSByYWRpb192YWxvciwgdGV4dD0nSk9HTzInLCB2YWx1ZT0yLCkKICAgICAgICAgICAgc2VsZi5idG4zID0gdHRrLlJhZGlvYnV0dG9uKHNlbGYucmFkaW8sdmFyaWFibGU9IHJhZGlvX3ZhbG9yLCB0ZXh0PSdBTUJBUyBBUyBURUxBUycsIHZhbHVlPTMpCiAgICAgICAgICAgIHNlbGYuYnRuMS5wYWNrKHNpZGU9TEVGVCkKICAgICAgICAgICAgc2VsZi5idG4yLnBhY2soc2lkZT1MRUZUKQogICAgICAgICAgICBzZWxmLmJ0bjMucGFjayhzaWRlPUxFRlQpCiAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLnRpdHVsbyA9IExhYmVsKHNlbGYucmFkaW8xLCB0ZXh0PSJTRUxFQ0lPTkUgQUJBSVhPIFFVQUwgTUFQQSBWT0PDiiBJUkEgTUlORVJBUiIpCiAgICAgICAgICAgIHNlbGYudGl0dWxvWyJmb250Il0gPSAoIkFyaWFsIiwgIjgiLCAiYm9sZCIpIAogICAgICAgICAgICBzZWxmLnRpdHVsby5wYWNrKCkKICAgICAgICAgICAgc2VsZi5tYXBhU2VsZWN0ID0gdHRrLkNvbWJvYm94KHNlbGYucmFkaW8xLCB2YWx1ZXM9bWFwYXMpCiAgICAgICAgICAgIHNlbGYubWFwYVNlbGVjdC5wYWNrKCkKCiAgICAgICAgICAgIGdsb2JhbCBmX3ZhbG9yCiAgICAgICAgICAgIGZfdmFsb3IgPSBJbnRWYXIoKQogICAgICAgICAgICBzZWxmLmx2bDEgPSB0dGsuUmFkaW9idXR0b24oc2VsZi5yYWRpbzIsdmFyaWFibGU9IGZfdmFsb3IsIHRleHQ9JzFGJywgdmFsdWU9MSwpCiAgICAgICAgICAgIHNlbGYubHZsMiA9IHR0ay5SYWRpb2J1dHRvbihzZWxmLnJhZGlvMix2YXJpYWJsZT0gZl92YWxvciwgdGV4dD0nMkYnLCB2YWx1ZT0yLCkKICAgICAgICAgICAgc2VsZi5sdmwzID0gdHRrLlJhZGlvYnV0dG9uKHNlbGYucmFkaW8yLHZhcmlhYmxlPSBmX3ZhbG9yLCB0ZXh0PSczRicsIHZhbHVlPTMpCiAgICAgICAgICAgIHNlbGYubHZsNCA9IHR0ay5SYWRpb2J1dHRvbihzZWxmLnJhZGlvMix2YXJpYWJsZT0gZl92YWxvciwgdGV4dD0nNEYnLCB2YWx1ZT00KQogICAgICAgICAgICBzZWxmLmx2bDEucGFjayhzaWRlPUxFRlQpCiAgICAgICAgICAgIHNlbGYubHZsMi5wYWNrKHNpZGU9TEVGVCkKICAgICAgICAgICAgc2VsZi5sdmwzLnBhY2soc2lkZT1MRUZUKQogICAgICAgICAgICBzZWxmLmx2bDQucGFjayhzaWRlPUxFRlQpCgogICAgICAgICAgICBzZWxmLnRpdHVsbyA9IExhYmVsKHNlbGYucmFkaW8zLCB0ZXh0PSJJUsOBIFVTQVIgUEVSR0FNSU5ITyBERSBURUxFUE9SVEU/IikKICAgICAgICAgICAgc2VsZi50aXR1bG9bImZvbnQiXSA9ICgiQXJpYWwiLCAiOCIsICJib2xkIikgCiAgICAgICAgICAgIHNlbGYudGl0dWxvLnBhY2soKQogICAgICAgICAgICBnbG9iYWwgdHBfdmFsb3IKICAgICAgICAgICAgdHBfdmFsb3IgPSBJbnRWYXIoKQogICAgICAgICAgICBzZWxmLmJ0bjUgPSB0dGsuUmFkaW9idXR0b24oc2VsZi5yYWRpbzQsdmFyaWFibGU9IHRwX3ZhbG9yLCB0ZXh0PSdTSU0nLCB2YWx1ZT0xLCkKICAgICAgICAgICAgc2VsZi5idG42ID0gdHRrLlJhZGlvYnV0dG9uKHNlbGYucmFkaW80LHZhcmlhYmxlPSB0cF92YWxvciwgdGV4dD0nTsODTycsIHZhbHVlPTAsKQogICAgICAgICAgICBzZWxmLmJ0bjUucGFjayhzaWRlPUxFRlQpCiAgICAgICAgICAgIHNlbGYuYnRuNi5wYWNrKHNpZGU9TEVGVCkKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICNCb3TDo28gSW5pY2lhciAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYuYm90w6NvID0gQnV0dG9uKHNlbGYuc2VndW5kb0NvbnRhaW5lciwgYmFja2dyb3VuZCA9ICJncmVlbiIpCiAgICAgICAgICAgIHNlbGYuYm90w6NvWyJ0ZXh0Il0gPSAiSU5JQ0lBUiIgICAgICAgIAogICAgICAgICAgICBzZWxmLmJvdMOjb1siZm9udCJdID0gKCJBUklBTCIsICI4IiwgImJvbGQiKQogICAgICAgICAgICBzZWxmLmJvdMOjb1sid2lkdGgiXSA9IDEzICAgICAgICAgICAgICAgIAogICAgICAgICAgICByb290LmJpbmQoJzxSZXR1cm4+JywgbGFtYmRhIGV2ZW50PU5vbmU6IHNlbGYuSW5pY2lhcigpKQogICAgICAgICAgICBzZWxmLmJvdMOjb1siY29tbWFuZCJdID0gc2VsZi5JbmljaWFyICAgICAgIAogICAgICAgICAgICBzZWxmLmJvdMOjby5wYWNrKCkKICAgICAgICAgICAgc2VsZi5zdGF0dXNNc2cgPSBMYWJlbChzZWxmLnNlZ3VuZG9Db250YWluZXIsIHRleHQ9IiIsIGZvbnQ9c2VsZi5mb250ZVBhZHJhbykKICAgICAgICAgICAgc2VsZi5zdGF0dXNNc2cucGFjaygpCgogICAgICAgICAgICAjQm90w6NvIFBhcmFyCiAgICAgICAgICAgIHNlbGYuYm90w6NvID0gQnV0dG9uKHNlbGYucXVhcnRvQ29udGFpbmVyLCBiYWNrZ3JvdW5kID0gInJlZCIpCiAgICAgICAgICAgIHNlbGYuYm90w6NvWyJ0ZXh0Il0gPSAiUEFSQVIiICAgICAgICAKICAgICAgICAgICAgc2VsZi5ib3TDo29bImZvbnQiXSA9ICgiQVJJQUwiLCAiOCIsICJib2xkIikKICAgICAgICAgICAgc2VsZi5ib3TDo29bIndpZHRoIl0gPSAxMyAgICAgICAgCiAgICAgICAgICAgIHNlbGYuYm90w6NvWyJjb21tYW5kIl0gPSBzZWxmLlBhcmFyCiAgICAgICAgICAgIHNlbGYuYm90w6NvLnBhY2soKQogICAgICAgICAgICBzZWxmLnN0YXR1c01zZyA9IExhYmVsKHNlbGYucXVhcnRvQ29udGFpbmVyLCB0ZXh0PSIiLCBmb250PXNlbGYuZm9udGVQYWRyYW8pCiAgICAgICAgICAgIHNlbGYuc3RhdHVzTXNnLnBhY2soKQogICAgICAgICAgICAgICAgCiAgICAgICAgI0luaWNpYXIKICAgIGRlZiBJbmljaWFyKHNlbGYpOgogICAgICAgIHRlbGEgPSBpbnQocmFkaW9fdmFsb3IuZ2V0KCkpIAogICAgICAgIGdsb2JhbCBsdnMKICAgICAgICBsdnMgPSBpbnQoZl92YWxvci5nZXQoKSkgCiAgICAgICAgZ2xvYmFsIG1hcGEKICAgICAgICBtYXBhID0gc2VsZi5tYXBhU2VsZWN0LmdldCgpICAKICAgICAgICBnbG9iYWwgaWZ0cCAKICAgICAgICBpZnRwID0gIGludCh0cF92YWxvci5nZXQoKSkgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgaWYgKHRlbGEgIT0xKSBhbmQgKHRlbGEgIT0yKSBhbmQgKHRlbGEgIT0zKTogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYuc3RhdHVzTXNnWyJ0ZXh0Il0gPSBmIlwKTkVOSFVNQSBURUxBIEZPSSBTRUxFQ0lPTkFEQSIgIAoKICAgICAgICBlbGlmIG1hcGEgbm90IGluIG1hcGFzOiAgIAogICAgICAgICAgICBzZWxmLnN0YXR1c01zZ1sidGV4dCJdID0gZiJcCk5FTkhVTSBNQVBBIEZPSSBTRUxFQ0lPTkFETyIKCiAgICAgICAgZWxpZiAobHZzICE9MSkgYW5kIChsdnMgIT0yKSBhbmQgKGx2cyAhPTMpIGFuZCAobHZzICE9NCk6ICAgICAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLnN0YXR1c01zZ1sidGV4dCJdID0gZiJcCk5FTkhVTSBMVkwoMUYsMkYsM0YsNEYpIEZPSSBTRUxFQ0lPTkFETyIKICAgICAgIAogICAgICAgIGVsc2U6ICAgICAgICAKICAgICAgICAgICAgc2VsZi5zdGF0dXNNc2dbInRleHQiXSA9ICIiICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYucmFkaW8uZGVzdHJveSgpCiAgICAgICAgICAgIHNlbGYucmFkaW8xLmRlc3Ryb3koKQogICAgICAgICAgICBzZWxmLnJhZGlvMi5kZXN0cm95KCkKICAgICAgICAgICAgc2VsZi5yYWRpbzMuZGVzdHJveSgpCiAgICAgICAgICAgIHNlbGYucmFkaW80LmRlc3Ryb3koKQogICAgICAgICAgICBzZWxmLnByaW1laXJvQ29udGFpbmVyLmRlc3Ryb3koKSAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi5zZWd1bmRvQ29udGFpbmVyLmRlc3Ryb3koKQogICAgICAgICAgICBnbG9iYWwgc3RhdHVzTXNnICAgIAogICAgICAgICAgICBzdGF0dXNNc2cgPSBMYWJlbChzZWxmLnRlcmNlaXJvQ29udGFpbmVyLCB0ZXh0PSIiLCBmb250PXNlbGYuZm9udGVQYWRyYW8sKQogICAgICAgICAgICBzdGF0dXNNc2cucGFjaygpIAogICAgICAgICAgICBnbG9iYWwgcm9kYW5kb01zZwogICAgICAgICAgICByb2RhbmRvTXNnID0gTGFiZWwoc2VsZi50ZXJjZWlyb0NvbnRhaW5lciwgdGV4dD0iIiwgZm9udD1zZWxmLmZvbnRlUGFkcmFvLCBmZz0iYmxhY2siLCBiZz0iZ3JlZW4iKQogICAgICAgICAgICByb2RhbmRvTXNnLnBhY2soKSAgIAogICAgICAgICAgICBnbG9iYWwgZXJyb01zZwogICAgICAgICAgICBlcnJvTXNnID0gTGFiZWwoc2VsZi50ZXJjZWlyb0NvbnRhaW5lciwgdGV4dD0iIiwgZm9udD1mb250ZVBhZHJhbzEsIGZnPSJyZWQiKQogICAgICAgICAgICBlcnJvTXNnLnBhY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgcm9vdC51cGRhdGUoKQogICAgICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1TdGFydCkuc3RhcnQoKSAgICAgICAgICAgCiAgICAgICAgICAgIHJvb3QudXBkYXRlKCkKICAgICAgICAKICAgICNQYXJhciAgICAgICAgIAogICAgZGVmIFBhcmFyKHNlbGYpOgogICAgICAgIGV4ZWN1dGFuZG8gPSBGYWxzZQogICAgICAgIHNlbGYuc3RhdHVzTXNnID0gTGFiZWwoc2VsZi5xdWFydG9Db250YWluZXIsIHRleHQ9IiIsIGZvbnQ9c2VsZi5mb250ZVBhZHJhbywgZmc9InJlZCIpCiAgICAgICAgc2VsZi5zdGF0dXNNc2cucGFjaygpCiAgICAgICAgc2VsZi5zdGF0dXNNc2dbInRleHQiXSA9ICJGRUNIQU5ETy4uLiIKICAgICAgICByb290LnVwZGF0ZSgpCiAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgcm9vdC51cGRhdGUoKQogICAgICAgIHJvb3QuZGVzdHJveSgpCiAgICAgICAgc3lzLmV4aXQoKQoKI0ludGVyZmFjZSBMb2dpbgpjbGFzcyBMb2dpbjogCiAgICBkZWYgX19pbml0X18oc2VsZiwgbWFzdGVyPU5vbmUpOgogICAgI0xBWU9VVCBETyBHVUkgSU5URVJGQUNFIFBSSU5DSVBBTAogICAgICAgICMxwrogQ29udGFpbmVyICAgICAgCiAgICAgICAgICAgIGxhYmVsX2ltYWdlbSA9IExhYmVsKHJvb3QxLCBpbWFnZT1pbWcpLnBhY2socGFkeD0xMCwgcGFkeT0xMCkgCiAgICAgICAgICAgIHNlbGYuZm9udGVQYWRyYW8gPSAoIkFyaWFsIiwgIjgiLCAiYm9sZCIpCiAgICAgICAgICAgIGdsb2JhbCBmb250ZVBhZHJhbzEKICAgICAgICAgICAgZm9udGVQYWRyYW8xID0gKCJGdXR1cmEiLCAiMTAiLCAiYm9sZCIpICAgIAogICAgICAgICAgICBzZWxmLnByaW1laXJvQ29udGFpbmVyID0gRnJhbWUobWFzdGVyKQogICAgICAgICAgICBzZWxmLnByaW1laXJvQ29udGFpbmVyWyJwYWR5Il0gPSAxMAogICAgICAgICAgICBzZWxmLnByaW1laXJvQ29udGFpbmVyLnBhY2soKQogICAgICAgICAgICAKICAgICAgICAgICAgIzLCuiBDb250YWluZXIKICAgICAgICAgICAgc2VsZi5zZWd1bmRvQ29udGFpbmVyID0gRnJhbWUobWFzdGVyKQogICAgICAgICAgICBzZWxmLnNlZ3VuZG9Db250YWluZXJbInBhZHgiXSA9IDEwCiAgICAgICAgICAgIHNlbGYuc2VndW5kb0NvbnRhaW5lci5wYWNrKCkKCiAgICAgICAgICAgICMzwrogQ29udGFpbmVyCiAgICAgICAgICAgIHNlbGYudGVyY2Vpcm9Db250YWluZXIgPSBGcmFtZShtYXN0ZXIpCiAgICAgICAgICAgIHNlbGYudGVyY2Vpcm9Db250YWluZXJbInBhZHgiXSA9IDEwCiAgICAgICAgICAgIHNlbGYudGVyY2Vpcm9Db250YWluZXJbInBhZHkiXSA9IDIwCiAgICAgICAgICAgIHNlbGYudGVyY2Vpcm9Db250YWluZXIucGFjaygpCiAgICAgICAgICAgIAogICAgICAgICAgICAjNMK6IENvbnRhaW5lcgogICAgICAgICAgICBzZWxmLnF1YXJ0b0NvbnRhaW5lciA9IEZyYW1lKG1hc3RlcikgICAgICAgIAogICAgICAgICAgICBzZWxmLnF1YXJ0b0NvbnRhaW5lclsicGFkeSJdID0gMTAKICAgICAgICAgICAgc2VsZi5xdWFydG9Db250YWluZXIucGFjaygpCgogICAgICAgICNGSU0gTEFZT1VUIElOVEVSRkFDRSBQUklOQ0lQQUwKICAgICAgICAgICAgICAgIAogICAgICAgICNJbnRlcmZhY2UgUHJpbmNpcGFsCiAgICAgICAgICAgIGdsb2JhbCB0aXR1bG8KICAgICAgICAgICAgdGl0dWxvID0gTGFiZWwoc2VsZi5wcmltZWlyb0NvbnRhaW5lciwgdGV4dD0iTE9HSU4iKQogICAgICAgICAgICB0aXR1bG9bImZvbnQiXSA9ICgiRnV0dXJhIiwgIjEyIiwgImJvbGQiKQogICAgICAgICAgICB0aXR1bG8ucGFjaygpCiAgICAgICAgICAgIHNlbGYuc3RhdHVzTXNnID0gTGFiZWwoc2VsZi5xdWFydG9Db250YWluZXIsIHRleHQ9IkFVVEVOVElDQU5ETyBMT0dJTi4uLiIsIGZvbnQ9c2VsZi5mb250ZVBhZHJhbywgZmc9InJlZCIpCiAgICAgICAgICAgIHNlbGYuc3RhdHVzTXNnLnBhY2soKSAgCiAgICAgICAgICAgIHJvb3QxLnVwZGF0ZSgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgc2VsZi5zdGF0dXNNc2dbInRleHQiXSA9ICIiCiAgICAgICAgICAgIGxvZ2luKCkKCiNRdWl0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCmRlZiBvbl9jbG9zaW5nKCk6ICAgIAogICAgc3lzLmV4aXQoKSAgICAgICAgCgojQXV0ZW50aWNhdGlvbiBTeXN0ZW0KZGVmIGxvZ2luKCk6CiAgICB1cmwgPSAiaHR0cHM6Ly9naXRodWIuY29tL05jamoxMjMvTUFDL2Jsb2IvbWFpbi9BZHJlc3MiCiAgICBwYWdlID0gdXJsb3Blbih1cmwpCiAgICBodG1sID0gcGFnZS5yZWFkKCkuZGVjb2RlKCJ1dGYtOCIpCiAgICBzb3VwID0gQmVhdXRpZnVsU291cChodG1sLCAiaHRtbC5wYXJzZXIiKQogICAgQWRyID0gW10KICAgIEFkcmVzcyA9IHNvdXAuZmluZF9hbGwoJ3RkJywgeydjbGFzcyc6ICJibG9iLWNvZGUgYmxvYi1jb2RlLWlubmVyIGpzLWZpbGUtbGluZSJ9KQogICAgQWRyZXNzZXMgPSBsZW4oQWRyZXNzKQogICAgZm9yIGEgaW4gcmFuZ2UoQWRyZXNzZXMpOgogICAgICAgIEFkci5hcHBlbmQoQWRyZXNzW2FdLnN0cmluZykKICAgICAgICBjaGVjayA9IGdtYSgpICAgICAgICAgICAKICAgIGlmIGNoZWNrIGluIEFkcjogCiAgICAgICAgZ2xvYmFsIGF1dG9yaXplZCAgICAKICAgICAgICB0aXR1bG9bInRleHQiXSA9ICJBVVRFTlRJQ0FETyIKICAgICAgICByb290MS51cGRhdGUoKSAKICAgICAgICBnbG9iYWwgbWFwYXMgIAogICAgICAgIG1hcGFzID0gWydWYWxlIG9jdWx0byBkZSBCaWNoZW9uJywnVmFsZSBkYXMgc2VycGVudGVzIE9jdWx0byddCiAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICByb290MS5kZXN0cm95KCkKICAgICAgICBnbG9iYWwgcm9vdAogICAgICAgIHJvb3QgPSBUaygpICAgICAgIAogICAgICAgIGRpcmV0b3JpbyA9IChvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpKSArICcvaW1ncy8nICAKICAgICAgICByb290Lmljb25waG90byhGYWxzZSwgdGsuUGhvdG9JbWFnZShmaWxlPShvcy5wYXRoLmpvaW4oZGlyZXRvcmlvLCAiaWNvbi5wbmciKSkpKQogICAgICAgIGdsb2JhbCBpbWcKICAgICAgICBpbWcgPSBQaG90b0ltYWdlKGZpbGU9KG9zLnBhdGguam9pbihkaXJldG9yaW8sICJsb2doLnBuZyIpKSkKICAgICAgICByb290LnRpdGxlKCdNSVI0IHwgTWFjcm8gLyBCeTogTXVzYXNoaScpCiAgICAgICAgQXBwbGljYXRpb24ocm9vdCkKICAgICAgICByb290LnByb3RvY29sKCJXTV9ERUxFVEVfV0lORE9XIiwgb25fY2xvc2luZykKICAgICAgICByb290Lm1haW5sb29wKCkgICAgICAgICAgICAgICAgICAgCiAgICBlbHNlOgogICAgICAgIHRpdHVsb1sidGV4dCJdID0gIkRJU1BPU0lUSVZPIE7Dg08gQVVURU5USUNBRE8iCiAgICAgICAgcm9vdDEudXBkYXRlKCkKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgI3Jvb3QuZGVzdHJveSgpCiAgICAgICAgc3lzLmV4aXQoKSAKCiNTdGFydCAgIAppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgcm9vdDEgPSBUaygpCiAgICBkaXJldG9yaW8gPSAob3MucGF0aC5kaXJuYW1lKG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pKSkgKyAnL2ltZ3MvJyAgCiAgICByb290MS5pY29ucGhvdG8oRmFsc2UsIHRrLlBob3RvSW1hZ2UoZmlsZT0ob3MucGF0aC5qb2luKGRpcmV0b3JpbywgImljb24ucG5nIikpKSkKICAgIGltZyA9IFBob3RvSW1hZ2UoZmlsZT0ob3MucGF0aC5qb2luKGRpcmV0b3JpbywgImxvZ2gucG5nIikpKQogICAgcm9vdDEudGl0bGUoJ01JUjQgfCBNYWNybyAvIEJ5OiBNdXNhc2hpJykKICAgIExvZ2luKHJvb3QxKQogICAgcm9vdDEubWFpbmxvb3AoKSAgCgogCgoKCgoK'
