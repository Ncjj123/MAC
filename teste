b'CiNMaWJyYXJ5CmZyb20gZ2V0bWFjIGltcG9ydCBnZXRfbWFjX2FkZHJlc3MgYXMgZ21hOyBmcm9tIEJPVCBpbXBvcnQgc2xpZGUsIGNsaWNrO2Zyb20gY3R5cGVzIGltcG9ydCB3aW5kbGw7ZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXA7ZnJvbSB1cmxsaWIucmVxdWVzdCBpbXBvcnQgdXJsb3BlbiAgCmZyb20gdHFkbSBpbXBvcnQgdHFkbTtmcm9tIHRraW50ZXIgaW1wb3J0ICo7ZnJvbSB0a2ludGVyIGltcG9ydCB0dGs7ZnJvbSBQSUwgaW1wb3J0IEltYWdlT3BzCmltcG9ydCBweXRlc3NlcmFjdC5weXRlc3NlcmFjdCxweWF1dG9ndWksb3MscHlnZXR3aW5kb3csUElMLkltYWdlLHB5dGVzc2VyYWN0LHRpbWUsZ2xvYix3aW4zMmd1aSx3aW4zMnVpLHRocmVhZGluZyxzeXMscmFuZG9tO2ltcG9ydCB0a2ludGVyIGFzIHRrCmltcG9ydCBweWFybW9yCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBNYWluIENvZGUjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAKCiNUYW1hbmhvIFRlbGEKeHNpemUseXNpemUgPSBweWF1dG9ndWkuc2l6ZSgpCgojU3RhdHVzKFNhZmUsQ09NTikKIyAtPlJJR0hULCAgRE9XTiwgTEVGVCwgVVAgCmRlZiByZWNhbGN1bGFyKCk6ICAKICAgICMxOTIweDEwODAgIAogICAgaWYgeHNpemUgPT0gMTkyMCBhbmQgeXNpemUgPT0gMTA4MDoKICAgICAgICByZWNhbGN1bGFyLmExID0gMTUwMwogICAgICAgIHJlY2FsY3VsYXIuYjEgPSAxMjgKICAgICAgICByZWNhbGN1bGFyLmMxID0gMzY4CiAgICAgICAgcmVjYWxjdWxhci5kMSA9IDg0OAoKICAgICMxMzY2eDc2OCAgCiAgICBlbGlmIHhzaXplID09IDEzNjYgYW5kIHlzaXplID09IDc2ODoKICAgICAgICByZWNhbGN1bGFyLmExID0gMTA3NQogICAgICAgIHJlY2FsY3VsYXIuYjEgPSA4OQogICAgICAgIHJlY2FsY3VsYXIuYzEgPSAyNTQKICAgICAgICByZWNhbGN1bGFyLmQxID0gNTg0ICAgICAgICAKCiAgICAjMTM2MHg3NjggIAogICAgZWxpZiB4c2l6ZSA9PSAxMzYwIGFuZCB5c2l6ZSA9PSA3Njg6CiAgICAgICAgcmVjYWxjdWxhci5hMSA9IDEwNjAKICAgICAgICByZWNhbGN1bGFyLmIxID0gODkKICAgICAgICByZWNhbGN1bGFyLmMxID0gMjQ0CiAgICAgICAgcmVjYWxjdWxhci5kMSA9IDU4NAoKICAgICMxMjgweDcyMCAKICAgIGVsaWYgeHNpemUgPT0gMTI4MCBhbmQgeXNpemUgPT0gNzIwOgogICAgICAgIHJlY2FsY3VsYXIuYTEgPSAxMDA1CiAgICAgICAgcmVjYWxjdWxhci5iMSA9IDg0CiAgICAgICAgcmVjYWxjdWxhci5jMSA9IDIzNwogICAgICAgIHJlY2FsY3VsYXIuZDEgPSA1NTMKICAgIAogICAgIzExNzZ4NjY0IAogICAgZWxpZiB4c2l6ZSA9PSAxMTc2IGFuZCB5c2l6ZSA9PSA2NjQ6CiAgICAgICAgcmVjYWxjdWxhci5hMSA9IDkyNQogICAgICAgIHJlY2FsY3VsYXIuYjEgPSA3NwogICAgICAgIHJlY2FsY3VsYXIuYzEgPSAyMTgKICAgICAgICByZWNhbGN1bGFyLmQxID0gNTA2ICAgICAgICAgICAgCgogICAgI01haW9yIHF1ZSAxOTIweDEwODAKICAgIGVsaWYgeHNpemUgPjE5MjAgYW5kIHlzaXplID4xMDgwOgogICAgICAgIHBhc3MKCiAgICBlbHNlOiAgICAgICAgCiAgICAgICAgcmVjYWxjdWxhci5hMSA9IDAgICAKICAgICAgICByZWNhbGN1bGFyLmIxID0gMAogICAgICAgIHJlY2FsY3VsYXIuYzEgPSAwCiAgICAgICAgcmVjYWxjdWxhci5kMSA9IDAgIAoKI1N0YXR1cyhQZWRpcikKIyAtPlJJR0hULCAgRE9XTiwgTEVGVCwgVVAgCmRlZiByZWNhbGN1bGFyMSgpOiAgCiAgICAjMTkyMHgxMDgwICAKICAgIGlmIHhzaXplID09IDE5MjAgYW5kIHlzaXplID09IDEwODA6CiAgICAgICAgcmVjYWxjdWxhcjEuYTEgPSA3MQogICAgICAgIHJlY2FsY3VsYXIxLmIxID0gODIzCiAgICAgICAgcmVjYWxjdWxhcjEuYzEgPSAxNTkyCiAgICAgICAgcmVjYWxjdWxhcjEuZDEgPSAxMDQKCiAgICAjMTM2Nng3NjggIAogICAgZWxpZiB4c2l6ZSA9PSAxMzY2IGFuZCB5c2l6ZSA9PSA3Njg6CiAgICAgICAgcmVjYWxjdWxhcjEuYTEgPSA1MQogICAgICAgIHJlY2FsY3VsYXIxLmIxID0gNTczCiAgICAgICAgcmVjYWxjdWxhcjEuYzEgPSAxMTQxCiAgICAgICAgcmVjYWxjdWxhcjEuZDEgPSA3NiAgICAgICAgCgogICAgIzEzNjB4NzY4ICAKICAgIGVsaWYgeHNpemUgPT0gMTM2MCBhbmQgeXNpemUgPT0gNzY4OgogICAgICAgIHJlY2FsY3VsYXIxLmExID0gNDcKICAgICAgICByZWNhbGN1bGFyMS5iMSA9IDU2NAogICAgICAgIHJlY2FsY3VsYXIxLmMxID0gMTEzNQogICAgICAgIHJlY2FsY3VsYXIxLmQxID0gNzYKCiAgICAjMTI4MHg3MjAgCiAgICBlbGlmIHhzaXplID09IDEyODAgYW5kIHlzaXplID09IDcyMDoKICAgICAgICByZWNhbGN1bGFyMS5hMSA9IDQ2CiAgICAgICAgcmVjYWxjdWxhcjEuYjEgPSA1MzUKICAgICAgICByZWNhbGN1bGFyMS5jMSA9IDEwNjYKICAgICAgICByZWNhbGN1bGFyMS5kMSA9IDUyCiAgICAKICAgICMxMTc2eDY2NCAKICAgIGVsaWYgeHNpemUgPT0gMTE3NiBhbmQgeXNpemUgPT0gNjY0OgogICAgICAgIHJlY2FsY3VsYXIxLmExID0gNDEKICAgICAgICByZWNhbGN1bGFyMS5iMSA9IDQ5MgogICAgICAgIHJlY2FsY3VsYXIxLmMxID0gOTYyCiAgICAgICAgcmVjYWxjdWxhcjEuZDEgPSA2NiAgICAgICAgICAgIAoKICAgICNNYWlvciBxdWUgMTkyMHgxMDgwCiAgICBlbGlmIHhzaXplID4xOTIwIGFuZCB5c2l6ZSA+MTA4MDoKICAgICAgICBwYXNzCgogICAgZWxzZTogICAgICAgIAogICAgICAgIHJlY2FsY3VsYXIxLmExID0gMCAgIAogICAgICAgIHJlY2FsY3VsYXIxLmIxID0gMAogICAgICAgIHJlY2FsY3VsYXIxLmMxID0gMAogICAgICAgIHJlY2FsY3VsYXIxLmQxID0gMCAgCgojU3RhdHVzIE1pbmVyYW5kby1Nb3ZlbmRvICAgCmRlZiByZWNhbGN1bGFyMigpOiAgCiAgICAjMTkyMHgxMDgwICAKICAgIGlmIHhzaXplID09IDE5MjAgYW5kIHlzaXplID09IDEwODA6CiAgICAgICAgcmVjYWxjdWxhcjIuYTEgPSA4MzAKICAgICAgICByZWNhbGN1bGFyMi5iMSA9IDcwMQogICAgICAgIHJlY2FsY3VsYXIyLmMxID0gMTAxNwogICAgICAgIHJlY2FsY3VsYXIyLmQxID0gMjc3CgpkZWYgcmVjYWxjdWxhcjMoKToKICAgICMxOTIweDEwODAgIAogICAgaWYgeHNpemUgPT0gMTkyMCBhbmQgeXNpemUgPT0gMTA4MDoKICAgICAgICByZWNhbGN1bGFyMy5hMSA9IDgwNAogICAgICAgIHJlY2FsY3VsYXIzLmIxID0gNjk1CiAgICAgICAgcmVjYWxjdWxhcjMuYzEgPSAxMDc4CiAgICAgICAgcmVjYWxjdWxhcjMuZDEgPSAyNzIKCiNNb3VzZVNsaWRlCmRlZiBtb3ZlcihhLGIpOgogICAgc2NyZWVuY2FsY3ggPSAoYSAqIDEwMCkvIDE5MjAKICAgIHhyZXN1bHQgPSAoc2NyZWVuY2FsY3ggKiB4c2l6ZSkgLyAxMDAgCiAgICBhID0gaW50KHhyZXN1bHQpCiAgICBzY3JlZW5jYWxjeSA9IChiICogMTAwKS8gMTA4MAogICAgeXJlc3VsdCA9IChzY3JlZW5jYWxjeSAqIHlzaXplKSAvIDEwMCAKICAgIGIgPSBpbnQoeXJlc3VsdCkKICAgIHNsaWRlKGEsYikKCiNHZXRUZXNzZXJhY3QKaWYgZ2V0YXR0cihzeXMsICdmcm96ZW4nLCBGYWxzZSk6CiAgICBfcGF0aCA9IG9zLnBhdGguam9pbihzeXMuX01FSVBBU1MsICcuL1Rlc3NlcmFjdC90ZXNzZXJhY3QuZXhlJykKICAgIHB5dGVzc2VyYWN0LnB5dGVzc2VyYWN0LnRlc3NlcmFjdF9jbWQgPV9wYXRoCiAgICAjIHRoZSAuZXhlIHdpbGwgbG9vayBoZXJlCmVsc2U6ICAgIAogICAgcHl0ZXNzZXJhY3QucHl0ZXNzZXJhY3QudGVzc2VyYWN0X2NtZCA9IHIiQzpcUHJvZ3JhbSBGaWxlcyAoeDg2KVxUZXNzZXJhY3RcdGVzc2VyYWN0LmV4ZSIKICAgICNydXRhIGRvbmRlIHNlIGVuY3VlbnRyZSBzdSB0cmVzc2VyYWN0ICAgIAoKI1ZhcmlhdmVpcyBHbG9iYWlzCnRpdGxlID0gcHlnZXR3aW5kb3cuZ2V0QWxsVGl0bGVzKCkKZ2xvYmFsIGFuYWxpc2VkCmFuYWxpc2VkID0gRmFsc2UKZ2xvYmFsIE1pbmluZ2cKTWluaW5nZyA9IEZhbHNlCmdsb2JhbCBtb3ZpbmcKbW92aW5nID0gRmFsc2UKCmdsb2JhbCBhbHRlcmFkb3IKYWx0ZXJhZG9yID0gMAojTWFjcm8gLSBNYWluQm9keQpkZWYgU3RhcnQoKToKICAgIGV4ZWN1dGFuZG8gPSBUcnVlIAogICAgdGVsYSA9IGludChyYWRpb192YWxvci5nZXQoKSkgCiAgICB0cnk6ICAgIAogICAgICAgIHdoaWxlIGV4ZWN1dGFuZG8gPT0gVHJ1ZTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICByb290LnVwZGF0ZSgpICAgICAgICAgICAgIAogICAgICAgICAgICBpZiB0ZWxhID09IDE6IAogICAgICAgICAgICAgICAgdHJ5OiAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gcHlhdXRvZ3VpLmdldFdpbmRvd3NXaXRoVGl0bGUoJ01pcjRHWzFdJylbMF0gCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiVGVsYSBNaXI0R1sxXSBcCkVTVEEgU0VORE8gQ0FQVFVSQURBIgogICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8uLi4iICAKICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWF4aW1pemUoKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2cuZGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgZXJyb01zZ1sidGV4dCJdID0gZiJVTSBFUlJPIE9DT1JSRVUhISEgXApcCkpPR08xIE7Dg08gRU5DT05UUkFETyIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiIiAgCiAgICAgICAgICAgIGVsaWYgdGVsYSA9PSAyOiAgICAgCiAgICAgICAgICAgICAgICB0cnk6ICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0aXR1bG8xID0gcHlhdXRvZ3VpLmdldFdpbmRvd3NXaXRoVGl0bGUoJ01pcjRHWzJdJylbMF0gCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiVGVsYSBNaXI0R1syXSBcCkVTVEEgU0VORE8gQ0FQVFVSQURBIgogICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8uLi4iICAKICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1heGltaXplKCkgCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZy5kZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICBlcnJvTXNnWyJ0ZXh0Il0gPSBmIlVNIEVSUk8gT0NPUlJFVSEhISBcClwKSk9HTzIgTsODTyBFTkNPTlRSQURPIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICIiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGVsaWYgdGVsYSA9PSAzOgogICAgICAgICAgICAgICAgdHJ5OiAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IHB5YXV0b2d1aS5nZXRXaW5kb3dzV2l0aFRpdGxlKCdNaXI0R1sxXScpWzBdCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbzEgPSBweWF1dG9ndWkuZ2V0V2luZG93c1dpdGhUaXRsZSgnTWlyNEdbMl0nKVswXSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiVGVsYXMgTWlyNEdbMV0gZSBbMl0gXApFU1TDg08gU0VORE8gQ0FQVFVSQURBUyIKICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETy4uLiIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnLmRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgIGVycm9Nc2dbInRleHQiXSA9IGYiVU0gRVJSTyBPQ09SUkVVISEhIFwKXApURUxBUyAxIG91IDIgTsODTyBFTkNPTlRSQURBUyIgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICNTZSBhY2hhciBhcyBqYW5lbGFzIGV4ZWN1dGFyIGNvZGlnbwogICAgICAgICAgICBpZiB0ZWxhID09IDE6CiAgICAgICAgICAgICAgICBpZiB0aXR1bG86ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGh3bmQgPSB3aW4zMmd1aS5GaW5kV2luZG93KE5vbmUsICdNaXI0R1sxXScpICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsZWZ0LCB0b3AsIHJpZ2h0LCBib3QgPSB3aW4zMmd1aS5HZXRDbGllbnRSZWN0KGh3bmQpCiAgICAgICAgICAgICAgICAgICAgdyA9IHJpZ2h0IC0gbGVmdAogICAgICAgICAgICAgICAgICAgIGggPSBib3QgLSB0b3AKICAgICAgICAgICAgICAgICAgICBod25kREMgPSB3aW4zMmd1aS5HZXRXaW5kb3dEQyhod25kKQogICAgICAgICAgICAgICAgICAgIG1mY0RDICA9IHdpbjMydWkuQ3JlYXRlRENGcm9tSGFuZGxlKGh3bmREQykKICAgICAgICAgICAgICAgICAgICBzYXZlREMgPSBtZmNEQy5DcmVhdGVDb21wYXRpYmxlREMoKQogICAgICAgICAgICAgICAgICAgIHNhdmVCaXRNYXAgPSB3aW4zMnVpLkNyZWF0ZUJpdG1hcCgpCiAgICAgICAgICAgICAgICAgICAgc2F2ZUJpdE1hcC5DcmVhdGVDb21wYXRpYmxlQml0bWFwKG1mY0RDLCB3LCBoKQogICAgICAgICAgICAgICAgICAgIHNhdmVEQy5TZWxlY3RPYmplY3Qoc2F2ZUJpdE1hcCkKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB3aW5kbGwudXNlcjMyLlByaW50V2luZG93KGh3bmQsIHNhdmVEQy5HZXRTYWZlSGRjKCksIDMpICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGJtcGluZm8gPSBzYXZlQml0TWFwLkdldEluZm8oKQogICAgICAgICAgICAgICAgICAgIGJtcHN0ciA9IHNhdmVCaXRNYXAuR2V0Qml0bWFwQml0cyhUcnVlKQogICAgICAgICAgICAgICAgICAgIGltYWdlID0gUElMLkltYWdlLmZyb21idWZmZXIoJ1JHQicsIChibXBpbmZvWydibVdpZHRoJ10sIGJtcGluZm9bJ2JtSGVpZ2h0J10pLCBibXBzdHIsICdyYXcnLCAnQkdSWCcsIDAsIDEpICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGltYWdlLmxvYWQoKQogICAgICAgICAgICAgICAgICAgIHdpbjMyZ3VpLkRlbGV0ZU9iamVjdChzYXZlQml0TWFwLkdldEhhbmRsZSgpKQogICAgICAgICAgICAgICAgICAgIHNhdmVEQy5EZWxldGVEQygpCiAgICAgICAgICAgICAgICAgICAgbWZjREMuRGVsZXRlREMoKQogICAgICAgICAgICAgICAgICAgIHdpbjMyZ3VpLlJlbGVhc2VEQyhod25kLCBod25kREMpCiAgICAgICAgICAgICAgICAgICAgY2FtaW5obyA9IChvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpKSArICcvYS8nICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgcmVzdWx0ID09IDE6IAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTMgPSBpbWFnZQogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTIgPSBpbWFnZQogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTEgPSBpbWFnZSAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gaW1hZ2UKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICMgLT5SSUdIVCwgIERPV04sIExFRlQsIFVQICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICByZWNhbGN1bGFyKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyID0gKHJlY2FsY3VsYXIuYTEsIHJlY2FsY3VsYXIuYjEscmVjYWxjdWxhci5jMSxyZWNhbGN1bGFyLmQxKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTEgPSBJbWFnZU9wcy5jcm9wKGltYWdlMSwgYm9yZGVyKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UxLnNhdmUoY2FtaW5obyArICIzLnBuZyIpICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICByZWNhbGN1bGFyMSgpICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjEgPSAocmVjYWxjdWxhcjEuYTEsIHJlY2FsY3VsYXIxLmIxLCByZWNhbGN1bGFyMS5jMSwgcmVjYWxjdWxhcjEuZDEpICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBJbWFnZU9wcy5jcm9wKGltYWdlLCBib3JkZXIxKSAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc2F2ZShjYW1pbmhvICsgIjEucG5nIikgIAoKICAgICAgICAgICAgICAgICAgICAgICAgcmVjYWxjdWxhcjIoKSAgIAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIyID0gKHJlY2FsY3VsYXIyLmExLCByZWNhbGN1bGFyMi5iMSwgcmVjYWxjdWxhcjIuYzEsIHJlY2FsY3VsYXIyLmQxKSAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMiA9IEltYWdlT3BzLmNyb3AoaW1hZ2UyLCBib3JkZXIyKSAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UyLnNhdmUoY2FtaW5obyArICI0LnBuZyIpIAoKICAgICAgICAgICAgICAgICAgICAgICAgcmVjYWxjdWxhcjMoKSAKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyMyA9IChyZWNhbGN1bGFyMy5hMSwgcmVjYWxjdWxhcjMuYjEsIHJlY2FsY3VsYXIzLmMxLCByZWNhbGN1bGFyMy5kMSkgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTMgPSBJbWFnZU9wcy5jcm9wKGltYWdlMywgYm9yZGVyMykgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMy5zYXZlKGNhbWluaG8gKyAiNS5wbmciKSAKCiAgICAgICAgICAgICAgICAgICAgb3MuY2hkaXIoY2FtaW5obykKICAgICAgICAgICAgICAgICAgICBmb3IgZmlsZSBpbiBnbG9iLmdsb2IoIjEucG5nIik6ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZSAgCiAgICAgICAgICAgICAgICAgICAgZm9yIGZpbGUxIGluIGdsb2IuZ2xvYigiMy5wbmciKTogICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlMSA9IGZpbGUxIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgTWluaW5nZyA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT00OiAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDQpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTM6ICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdkZXNsaWdhZG8nLCAwKSAgICAgCiAgICAgICAgICAgICAgICAgICAgaW1hZ2VtMSA9IFBJTC5JbWFnZS5vcGVuKGZpbGUxKSAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gKHInLS1vZW0gMyAtLXBzbSAxMScpCiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHB5dGVzc2VyYWN0LmltYWdlX3RvX3N0cmluZyhpbWFnZW0xLCBjb25maWc9Y29uZmlnKQogICAgICAgICAgICAgICAgICAgIGIgPSB0ZXh0CiAgICAgICAgICAgICAgICAgICAgYiA9IGIubG93ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaW1hZ2VtID0gUElMLkltYWdlLm9wZW4oZmlsZSkgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IChyJy0tb2VtIDMgLS1wc20gMTEnKQogICAgICAgICAgICAgICAgICAgIHRleHQgPSBweXRlc3NlcmFjdC5pbWFnZV90b19zdHJpbmcoaW1hZ2VtLCBjb25maWc9Y29uZmlnKQogICAgICAgICAgICAgICAgICAgIGEgPSB0ZXh0CiAgICAgICAgICAgICAgICAgICAgYSA9IGEubG93ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBiLl9fY29udGFpbnNfXygic2FmZSIpOgogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8gRU0gTWlyNEdbMV0iCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QudXBkYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1pbmltaXplKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRxZG0odG90YWw9MTAwKSBhcyBiYXJyYV9wcm9ncmVzc286CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICJWYWxlIG9jdWx0byBkZSBCaWNoZW9uIjogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTU3OCw4NDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT00OiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTM6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgMykgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWFwYSA9PSAnVmFsZSBkYXMgc2VycGVudGVzIE9jdWx0byc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MDIsNTAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT00OiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTM6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgYi5fX2NvbnRhaW5zX18oImNvbW4iKTogCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsdnMgPT0gMSkgb3IgKGx2cyA9PSAyKSBvciAobHZzID09IDMpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdGFydCgpIAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8gRU0gTWlyNEdbMV0iCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QudXBkYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1pbmltaXplKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWF4aW1pemUoKSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRxZG0odG90YWw9MTAwKSBhcyBiYXJyYV9wcm9ncmVzc286CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICJWYWxlIG9jdWx0byBkZSBCaWNoZW9uIjogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTU3OCw4NDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTQ6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgNCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09MzogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCAzKSAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICdWYWxlIGRhcyBzZXJwZW50ZXMgT2N1bHRvJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQwMiw1MDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTQ6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgNCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09MzogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGEuX19jb250YWluc19fKCJwZWRpciIpOgogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8gRU0gTWlyNEdbMV0iCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5taW5pbWl6ZSgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCB0cWRtKHRvdGFsPTEwMCkgYXMgYmFycmFfcHJvZ3Jlc3NvOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTk0LDg4NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEwKSAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBweWF1dG9ndWkucHJlc3MoJ2YxMCcpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICJWYWxlIG9jdWx0byBkZSBCaWNoZW9uIjogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTU3OCw4NDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09NDogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCA0KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0zOiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDMpICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gJ1ZhbGUgZGFzIHNlcnBlbnRlcyBPY3VsdG8nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDAyLDUwMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09NDogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCA0KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0zOiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJUZWxhIE1pcjRHWzFdIFwKRVNUQSBTRU5ETyBDQVBUVVJBREEiCiAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETy4uLiIKICAgICAgICAgICAgaWYgdGVsYSA9PSAyOgogICAgICAgICAgICAgICAgaWYgdGl0dWxvMTogICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaHduZCA9IHdpbjMyZ3VpLkZpbmRXaW5kb3coTm9uZSwgJ01pcjRHWzJdJykgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxlZnQsIHRvcCwgcmlnaHQsIGJvdCA9IHdpbjMyZ3VpLkdldENsaWVudFJlY3QoaHduZCkKICAgICAgICAgICAgICAgICAgICB3ID0gcmlnaHQgLSBsZWZ0CiAgICAgICAgICAgICAgICAgICAgaCA9IGJvdCAtIHRvcAogICAgICAgICAgICAgICAgICAgIGh3bmREQyA9IHdpbjMyZ3VpLkdldFdpbmRvd0RDKGh3bmQpCiAgICAgICAgICAgICAgICAgICAgbWZjREMgID0gd2luMzJ1aS5DcmVhdGVEQ0Zyb21IYW5kbGUoaHduZERDKQogICAgICAgICAgICAgICAgICAgIHNhdmVEQyA9IG1mY0RDLkNyZWF0ZUNvbXBhdGlibGVEQygpCiAgICAgICAgICAgICAgICAgICAgc2F2ZUJpdE1hcCA9IHdpbjMydWkuQ3JlYXRlQml0bWFwKCkKICAgICAgICAgICAgICAgICAgICBzYXZlQml0TWFwLkNyZWF0ZUNvbXBhdGlibGVCaXRtYXAobWZjREMsIHcsIGgpCiAgICAgICAgICAgICAgICAgICAgc2F2ZURDLlNlbGVjdE9iamVjdChzYXZlQml0TWFwKQogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHdpbmRsbC51c2VyMzIuUHJpbnRXaW5kb3coaHduZCwgc2F2ZURDLkdldFNhZmVIZGMoKSwgMykgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBibXBpbmZvID0gc2F2ZUJpdE1hcC5HZXRJbmZvKCkKICAgICAgICAgICAgICAgICAgICBibXBzdHIgPSBzYXZlQml0TWFwLkdldEJpdG1hcEJpdHMoVHJ1ZSkKICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IFBJTC5JbWFnZS5mcm9tYnVmZmVyKCdSR0InLCAoYm1waW5mb1snYm1XaWR0aCddLCBibXBpbmZvWydibUhlaWdodCddKSwgYm1wc3RyLCAncmF3JywgJ0JHUlgnLCAwLCAxKSAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGRhdGEgPSBpbWFnZS5sb2FkKCkKICAgICAgICAgICAgICAgICAgICB3aW4zMmd1aS5EZWxldGVPYmplY3Qoc2F2ZUJpdE1hcC5HZXRIYW5kbGUoKSkKICAgICAgICAgICAgICAgICAgICBzYXZlREMuRGVsZXRlREMoKQogICAgICAgICAgICAgICAgICAgIG1mY0RDLkRlbGV0ZURDKCkgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgd2luMzJndWkuUmVsZWFzZURDKGh3bmQsIGh3bmREQykgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNhbWluaG8gPSAob3MucGF0aC5kaXJuYW1lKG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pKSkgKyAnL2EvJyAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgcmVzdWx0ID09IDE6ICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UzID0gaW1hZ2UKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UyID0gaW1hZ2UKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UxID0gaW1hZ2UgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IGltYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgIyAtPlJJR0hULCAgRE9XTiwgTEVGVCwgVVAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FsY3VsYXIoKSAgIAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIgPSAocmVjYWxjdWxhci5hMSwgcmVjYWxjdWxhci5iMSxyZWNhbGN1bGFyLmMxLHJlY2FsY3VsYXIuZDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMSA9IEltYWdlT3BzLmNyb3AoaW1hZ2UxLCBib3JkZXIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTEuc2F2ZShjYW1pbmhvICsgIjMucG5nIikgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FsY3VsYXIxKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyMSA9IChyZWNhbGN1bGFyMS5hMSwgcmVjYWxjdWxhcjEuYjEsIHJlY2FsY3VsYXIxLmMxLCByZWNhbGN1bGFyMS5kMSkgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IEltYWdlT3BzLmNyb3AoaW1hZ2UsIGJvcmRlcjEpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zYXZlKGNhbWluaG8gKyAiMS5wbmciKSAgCgogICAgICAgICAgICAgICAgICAgICAgICByZWNhbGN1bGFyMigpICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjIgPSAocmVjYWxjdWxhcjIuYTEsIHJlY2FsY3VsYXIyLmIxLCByZWNhbGN1bGFyMi5jMSwgcmVjYWxjdWxhcjIuZDEpICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UyID0gSW1hZ2VPcHMuY3JvcChpbWFnZTIsIGJvcmRlcjIpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTIuc2F2ZShjYW1pbmhvICsgIjQucG5nIikgCgogICAgICAgICAgICAgICAgICAgICAgICByZWNhbGN1bGFyMygpIAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIzID0gKHJlY2FsY3VsYXIzLmExLCByZWNhbGN1bGFyMy5iMSwgcmVjYWxjdWxhcjMuYzEsIHJlY2FsY3VsYXIzLmQxKSAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMyA9IEltYWdlT3BzLmNyb3AoaW1hZ2UzLCBib3JkZXIzKSAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UzLnNhdmUoY2FtaW5obyArICI1LnBuZyIpIAoKICAgICAgICAgICAgICAgICAgICBpZiBNaW5pbmdnID09IFRydWU6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTQ6ICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgNCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09MzogIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2Rlc2xpZ2FkbycsIDApICAgICAKICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBvcy5jaGRpcihjYW1pbmhvKQogICAgICAgICAgICAgICAgICAgIGZvciBmaWxlIGluIGdsb2IuZ2xvYigiMS5wbmciKTogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUgPSBmaWxlICAKICAgICAgICAgICAgICAgICAgICBmb3IgZmlsZTEgaW4gZ2xvYi5nbG9iKCIzLnBuZyIpOiAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUxID0gZmlsZTEgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpbWFnZW0xID0gUElMLkltYWdlLm9wZW4oZmlsZTEpICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25maWcgPSAocictLW9lbSAzIC0tcHNtIDExJykKICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gcHl0ZXNzZXJhY3QuaW1hZ2VfdG9fc3RyaW5nKGltYWdlbTEsIGNvbmZpZz1jb25maWcpCiAgICAgICAgICAgICAgICAgICAgYiA9IHRleHQKICAgICAgICAgICAgICAgICAgICBiID0gYi5sb3dlcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpbWFnZW0gPSBQSUwuSW1hZ2Uub3BlbihmaWxlKSAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gKHInLS1vZW0gMyAtLXBzbSAxMScpCiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHB5dGVzc2VyYWN0LmltYWdlX3RvX3N0cmluZyhpbWFnZW0sIGNvbmZpZz1jb25maWcpCiAgICAgICAgICAgICAgICAgICAgYSA9IHRleHQKICAgICAgICAgICAgICAgICAgICBhID0gYS5sb3dlcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgYi5fX2NvbnRhaW5zX18oInNhZmUiKToKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiTUFDUk8gU0VORE8gRVhFQ1VUQURPIEVNIE1pcjRHWzJdIgogICAgICAgICAgICAgICAgICAgICAgICByb290LnVwZGF0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbzEubWluaW1pemUoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1heGltaXplKCkgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggdHFkbSh0b3RhbD0xMDApIGFzIGJhcnJhX3Byb2dyZXNzbzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHlhdXRvZ3VpLnByZXNzKCdmMTAnKSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT00OiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTM6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWFwYSA9PSAnVmFsZSBkYXMgc2VycGVudGVzIE9jdWx0byc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MDIsNTAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09NDogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCA0KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0zOiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgYi5fX2NvbnRhaW5zX18oImNvbW4iKTogCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsdnMgPT0gMSkgb3IgKGx2cyA9PSAyKSBvciAobHZzID09IDMpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdGFydCgpIAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8gRU0gTWlyNEdbMl0iCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QudXBkYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMS5taW5pbWl6ZSgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1heGltaXplKCkgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCB0cWRtKHRvdGFsPTEwMCkgYXMgYmFycmFfcHJvZ3Jlc3NvOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBweWF1dG9ndWkucHJlc3MoJ2YxMCcpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWFwYSA9PSAiVmFsZSBvY3VsdG8gZGUgQmljaGVvbiI6ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE1NzgsODQ0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT00OiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTM6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gJ1ZhbGUgZGFzIHNlcnBlbnRlcyBPY3VsdG8nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDAyLDUwMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09NDogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCA0KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0zOiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBhLl9fY29udGFpbnNfXygicGVkaXIiKToKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiTUFDUk8gU0VORE8gRVhFQ1VUQURPIEVNIE1pcjRHWzJdIgogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1pbmltaXplKCkgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMS5tYXhpbWl6ZSgpICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCB0cWRtKHRvdGFsPTEwMCkgYXMgYmFycmFfcHJvZ3Jlc3NvOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTk0LDg4NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEwKSAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBweWF1dG9ndWkucHJlc3MoJ2YxMCcpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICJWYWxlIG9jdWx0byBkZSBCaWNoZW9uIjogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTU3OCw4NDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09NDogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCA0KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0zOiAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaW5pbmcoJ2xpZ2FkbycsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICdWYWxlIGRhcyBzZXJwZW50ZXMgT2N1bHRvJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQwMiw1MDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PTQ6ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pbmluZygnbGlnYWRvJywgNCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09MzogICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWluaW5nKCdsaWdhZG8nLCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIlRlbGEgTWlyNEdbMl0gXApFU1RBIFNFTkRPIENBUFRVUkFEQSIKICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSAiTUFDUk8gU0VORE8gRVhFQ1VUQURPLi4uIiAgICAgICAgICAgIAogICAgICAgICAgICBpZiB0ZWxhID09IDM6ICAKICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpCiAgICAgICAgICAgICAgICB0aXR1bG8xLm1heGltaXplKCkgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgdGl0dWxvMTogICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaHduZCA9IHdpbjMyZ3VpLkZpbmRXaW5kb3coTm9uZSwgJ01pcjRHWzJdJykgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxlZnQsIHRvcCwgcmlnaHQsIGJvdCA9IHdpbjMyZ3VpLkdldENsaWVudFJlY3QoaHduZCkKICAgICAgICAgICAgICAgICAgICB3ID0gcmlnaHQgLSBsZWZ0CiAgICAgICAgICAgICAgICAgICAgaCA9IGJvdCAtIHRvcAogICAgICAgICAgICAgICAgICAgIGh3bmREQyA9IHdpbjMyZ3VpLkdldFdpbmRvd0RDKGh3bmQpCiAgICAgICAgICAgICAgICAgICAgbWZjREMgID0gd2luMzJ1aS5DcmVhdGVEQ0Zyb21IYW5kbGUoaHduZERDKQogICAgICAgICAgICAgICAgICAgIHNhdmVEQyA9IG1mY0RDLkNyZWF0ZUNvbXBhdGlibGVEQygpCiAgICAgICAgICAgICAgICAgICAgc2F2ZUJpdE1hcCA9IHdpbjMydWkuQ3JlYXRlQml0bWFwKCkKICAgICAgICAgICAgICAgICAgICBzYXZlQml0TWFwLkNyZWF0ZUNvbXBhdGlibGVCaXRtYXAobWZjREMsIHcsIGgpCiAgICAgICAgICAgICAgICAgICAgc2F2ZURDLlNlbGVjdE9iamVjdChzYXZlQml0TWFwKQogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHdpbmRsbC51c2VyMzIuUHJpbnRXaW5kb3coaHduZCwgc2F2ZURDLkdldFNhZmVIZGMoKSwgMykgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBibXBpbmZvID0gc2F2ZUJpdE1hcC5HZXRJbmZvKCkKICAgICAgICAgICAgICAgICAgICBibXBzdHIgPSBzYXZlQml0TWFwLkdldEJpdG1hcEJpdHMoVHJ1ZSkKICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IFBJTC5JbWFnZS5mcm9tYnVmZmVyKCdSR0InLCAoYm1waW5mb1snYm1XaWR0aCddLCBibXBpbmZvWydibUhlaWdodCddKSwgYm1wc3RyLCAncmF3JywgJ0JHUlgnLCAwLCAxKSAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGRhdGEgPSBpbWFnZS5sb2FkKCkKICAgICAgICAgICAgICAgICAgICB3aW4zMmd1aS5EZWxldGVPYmplY3Qoc2F2ZUJpdE1hcC5HZXRIYW5kbGUoKSkKICAgICAgICAgICAgICAgICAgICBzYXZlREMuRGVsZXRlREMoKQogICAgICAgICAgICAgICAgICAgIG1mY0RDLkRlbGV0ZURDKCkgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgd2luMzJndWkuUmVsZWFzZURDKGh3bmQsIGh3bmREQykKICAgICAgICAgICAgICAgICAgICBjYW1pbmhvID0gKG9zLnBhdGguZGlybmFtZShvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSkpICsgJy9hLycgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIHJlc3VsdCA9PSAxOiAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMSA9IGltYWdlICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBpbWFnZQogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTEgPSBpbWFnZTEgCiAgICAgICAgICAgICAgICAgICAgICAgICMgLT5SSUdIVCwgIERPV04sIExFRlQsIFVQICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICByZWNhbGN1bGFyKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyID0gKHJlY2FsY3VsYXIuYTEsIHJlY2FsY3VsYXIuYjEscmVjYWxjdWxhci5jMSxyZWNhbGN1bGFyLmQxKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTEgPSBJbWFnZU9wcy5jcm9wKGltYWdlMSwgYm9yZGVyKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UxLnNhdmUoY2FtaW5obyArICIzLnBuZyIpICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICByZWNhbGN1bGFyMSgpICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjEgPSAocmVjYWxjdWxhcjEuYTEsIHJlY2FsY3VsYXIxLmIxLCByZWNhbGN1bGFyMS5jMSwgcmVjYWxjdWxhcjEuZDEpICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBJbWFnZU9wcy5jcm9wKGltYWdlLCBib3JkZXIxKSAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc2F2ZShjYW1pbmhvICsgIjEucG5nIikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIG9zLmNoZGlyKGNhbWluaG8pCiAgICAgICAgICAgICAgICAgICAgZm9yIGZpbGUgaW4gZ2xvYi5nbG9iKCIxLnBuZyIpOiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGZpbGUgIAogICAgICAgICAgICAgICAgICAgIGZvciBmaWxlMSBpbiBnbG9iLmdsb2IoIjMucG5nIik6ICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTEgPSBmaWxlMSAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGltYWdlbTEgPSBQSUwuSW1hZ2Uub3BlbihmaWxlMSkgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IChyJy0tb2VtIDMgLS1wc20gMTEnKQogICAgICAgICAgICAgICAgICAgIHRleHQgPSBweXRlc3NlcmFjdC5pbWFnZV90b19zdHJpbmcoaW1hZ2VtMSwgY29uZmlnPWNvbmZpZykKICAgICAgICAgICAgICAgICAgICBiID0gdGV4dAogICAgICAgICAgICAgICAgICAgIGIgPSBiLmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGltYWdlbSA9IFBJTC5JbWFnZS5vcGVuKGZpbGUpICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25maWcgPSAocictLW9lbSAzIC0tcHNtIDExJykKICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gcHl0ZXNzZXJhY3QuaW1hZ2VfdG9fc3RyaW5nKGltYWdlbSwgY29uZmlnPWNvbmZpZykKICAgICAgICAgICAgICAgICAgICBhID0gdGV4dAogICAgICAgICAgICAgICAgICAgIGEgPSBhLmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBiLl9fY29udGFpbnNfXygic2FmZSIpOgogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8gRU0gTWlyNEdbMl0iCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QudXBkYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMS5taW5pbWl6ZSgpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWluaW1pemUoKSAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMS5tYXhpbWl6ZSgpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRxZG0odG90YWw9MTAwKSBhcyBiYXJyYV9wcm9ncmVzc286CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICJWYWxlIG9jdWx0byBkZSBCaWNoZW9uIjogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTU3OCw4NDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gJ1ZhbGUgZGFzIHNlcnBlbnRlcyBPY3VsdG8nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDAyLDUwMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLm1heGltaXplKCkgCiAgICAgICAgICAgICAgICAgICAgaWYgYi5fX2NvbnRhaW5zX18oImNvbW4iKTogCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsdnMgPT0gMSkgb3IgKGx2cyA9PSAyKSBvciAobHZzID09IDMpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdGFydCgpIAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8gRU0gTWlyNEdbMl0iCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QudXBkYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMS5taW5pbWl6ZSgpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWluaW1pemUoKSAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMS5tYXhpbWl6ZSgpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggdHFkbSh0b3RhbD0xMDApIGFzIGJhcnJhX3Byb2dyZXNzbzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHlhdXRvZ3VpLnByZXNzKCdmMTAnKSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gIlZhbGUgb2N1bHRvIGRlIEJpY2hlb24iOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTc4LDg0NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICdWYWxlIGRhcyBzZXJwZW50ZXMgT2N1bHRvJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQwMiw1MDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpIAogICAgICAgICAgICAgICAgICAgIGlmIGEuX19jb250YWluc19fKCJwZWRpciIpOiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETyBFTSBNaXI0R1syXSIKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMS5taW5pbWl6ZSgpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWluaW1pemUoKSAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMS5tYXhpbWl6ZSgpICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCB0cWRtKHRvdGFsPTEwMCkgYXMgYmFycmFfcHJvZ3Jlc3NvOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTk0LDg4NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEwKSAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBweWF1dG9ndWkucHJlc3MoJ2YxMCcpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICJWYWxlIG9jdWx0byBkZSBCaWNoZW9uIjogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTU3OCw4NDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICdWYWxlIGRhcyBzZXJwZW50ZXMgT2N1bHRvJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQwMiw1MDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpIAogICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIlRlbGFzIE1pcjRHWzFdIHwgTWlyNEdbMl0gXApFU1TDg08gU0VORE8gQ0FQVFVSQURBUyIKICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSAiTUFDUk8gU0VORE8gRVhFQ1VUQURPLi4uIiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjTWlyNCBbMV0gICAgCiAgICAgICAgICAgICAgICBpZiB0aXR1bG86ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGh3bmQgPSB3aW4zMmd1aS5GaW5kV2luZG93KE5vbmUsICdNaXI0R1sxXScpICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsZWZ0LCB0b3AsIHJpZ2h0LCBib3QgPSB3aW4zMmd1aS5HZXRDbGllbnRSZWN0KGh3bmQpCiAgICAgICAgICAgICAgICAgICAgdyA9IHJpZ2h0IC0gbGVmdAogICAgICAgICAgICAgICAgICAgIGggPSBib3QgLSB0b3AKICAgICAgICAgICAgICAgICAgICBod25kREMgPSB3aW4zMmd1aS5HZXRXaW5kb3dEQyhod25kKQogICAgICAgICAgICAgICAgICAgIG1mY0RDICA9IHdpbjMydWkuQ3JlYXRlRENGcm9tSGFuZGxlKGh3bmREQykKICAgICAgICAgICAgICAgICAgICBzYXZlREMgPSBtZmNEQy5DcmVhdGVDb21wYXRpYmxlREMoKQogICAgICAgICAgICAgICAgICAgIHNhdmVCaXRNYXAgPSB3aW4zMnVpLkNyZWF0ZUJpdG1hcCgpCiAgICAgICAgICAgICAgICAgICAgc2F2ZUJpdE1hcC5DcmVhdGVDb21wYXRpYmxlQml0bWFwKG1mY0RDLCB3LCBoKQogICAgICAgICAgICAgICAgICAgIHNhdmVEQy5TZWxlY3RPYmplY3Qoc2F2ZUJpdE1hcCkKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB3aW5kbGwudXNlcjMyLlByaW50V2luZG93KGh3bmQsIHNhdmVEQy5HZXRTYWZlSGRjKCksIDMpICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGJtcGluZm8gPSBzYXZlQml0TWFwLkdldEluZm8oKQogICAgICAgICAgICAgICAgICAgIGJtcHN0ciA9IHNhdmVCaXRNYXAuR2V0Qml0bWFwQml0cyhUcnVlKQogICAgICAgICAgICAgICAgICAgIGltYWdlID0gUElMLkltYWdlLmZyb21idWZmZXIoJ1JHQicsIChibXBpbmZvWydibVdpZHRoJ10sIGJtcGluZm9bJ2JtSGVpZ2h0J10pLCBibXBzdHIsICdyYXcnLCAnQkdSWCcsIDAsIDEpICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGltYWdlLmxvYWQoKQogICAgICAgICAgICAgICAgICAgIHdpbjMyZ3VpLkRlbGV0ZU9iamVjdChzYXZlQml0TWFwLkdldEhhbmRsZSgpKQogICAgICAgICAgICAgICAgICAgIHNhdmVEQy5EZWxldGVEQygpCiAgICAgICAgICAgICAgICAgICAgbWZjREMuRGVsZXRlREMoKQogICAgICAgICAgICAgICAgICAgIHdpbjMyZ3VpLlJlbGVhc2VEQyhod25kLCBod25kREMpCiAgICAgICAgICAgICAgICAgICAgY2FtaW5obyA9IChvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpKSArICcvYS8nICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgcmVzdWx0ID09IDE6ICAKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UxID0gaW1hZ2UgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IGltYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMSA9IGltYWdlMSAKICAgICAgICAgICAgICAgICAgICAgICAgIyAtPlJJR0hULCAgRE9XTiwgTEVGVCwgVVAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FsY3VsYXIoKSAgIAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIgPSAocmVjYWxjdWxhci5hMSwgcmVjYWxjdWxhci5iMSxyZWNhbGN1bGFyLmMxLHJlY2FsY3VsYXIuZDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlMSA9IEltYWdlT3BzLmNyb3AoaW1hZ2UxLCBib3JkZXIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTEuc2F2ZShjYW1pbmhvICsgIjMucG5nIikgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FsY3VsYXIxKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyMSA9IChyZWNhbGN1bGFyMS5hMSwgcmVjYWxjdWxhcjEuYjEsIHJlY2FsY3VsYXIxLmMxLCByZWNhbGN1bGFyMS5kMSkgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IEltYWdlT3BzLmNyb3AoaW1hZ2UsIGJvcmRlcjEpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zYXZlKGNhbWluaG8gKyAiMS5wbmciKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgb3MuY2hkaXIoY2FtaW5obykKICAgICAgICAgICAgICAgICAgICBmb3IgZmlsZSBpbiBnbG9iLmdsb2IoIjEucG5nIik6ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZSAgCiAgICAgICAgICAgICAgICAgICAgZm9yIGZpbGUxIGluIGdsb2IuZ2xvYigiMy5wbmciKTogICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlMSA9IGZpbGUxIAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGltYWdlbTEgPSBQSUwuSW1hZ2Uub3BlbihmaWxlMSkgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IChyJy0tb2VtIDMgLS1wc20gMTEnKQogICAgICAgICAgICAgICAgICAgIHRleHQgPSBweXRlc3NlcmFjdC5pbWFnZV90b19zdHJpbmcoaW1hZ2VtMSwgY29uZmlnPWNvbmZpZykKICAgICAgICAgICAgICAgICAgICBiID0gdGV4dAogICAgICAgICAgICAgICAgICAgIGIgPSBiLmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGltYWdlbSA9IFBJTC5JbWFnZS5vcGVuKGZpbGUpICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25maWcgPSAocictLW9lbSAzIC0tcHNtIDExJykKICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gcHl0ZXNzZXJhY3QuaW1hZ2VfdG9fc3RyaW5nKGltYWdlbSwgY29uZmlnPWNvbmZpZykKICAgICAgICAgICAgICAgICAgICBhID0gdGV4dAogICAgICAgICAgICAgICAgICAgIGEgPSBhLmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgYi5fX2NvbnRhaW5zX18oInNhZmUiKToKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiTUFDUk8gU0VORE8gRVhFQ1VUQURPIEVNIE1pcjRHWzFdIgogICAgICAgICAgICAgICAgICAgICAgICByb290LnVwZGF0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5taW5pbWl6ZSgpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1pbmltaXplKCkgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRxZG0odG90YWw9MTAwKSBhcyBiYXJyYV9wcm9ncmVzc286CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICJWYWxlIG9jdWx0byBkZSBCaWNoZW9uIjogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTU3OCw4NDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hcGEgPT0gJ1ZhbGUgZGFzIHNlcnBlbnRlcyBPY3VsdG8nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDAyLDUwMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsdnMgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODksODAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OCw3NTgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDM1OCwxNTkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjg5LDQ2MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2OTQsNDE1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2NzEsMTQ4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDkzOSw1NjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTQyLDUxNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTYwLDE1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NTUsNTA2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU0NSw0NjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWF4aW1pemUoKSAKICAgICAgICAgICAgICAgICAgICBpZiBiLl9fY29udGFpbnNfXygiY29tbiIpOiAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGx2cyA9PSAxKSBvciAobHZzID09IDIpIG9yIChsdnMgPT0gMyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0YXJ0KCkgCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZ1sidGV4dCJdID0gIk1BQ1JPIFNFTkRPIEVYRUNVVEFETyBFTSBNaXI0R1sxXSIKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC51cGRhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWluaW1pemUoKSAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvMS5taW5pbWl6ZSgpICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ubWF4aW1pemUoKSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRxZG0odG90YWw9MTAwKSBhcyBiYXJyYV9wcm9ncmVzc286CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5YXV0b2d1aS5wcmVzcygnZjEwJykgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC4zMykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICJWYWxlIG9jdWx0byBkZSBCaWNoZW9uIjogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTU3OCw4NDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWFwYSA9PSAnVmFsZSBkYXMgc2VycGVudGVzIE9jdWx0byc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNDI4LDcxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MDIsNTAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWZ0cCA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMzg4LDYwNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxMDQ2LDc2OCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSg2MCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgxLjU5KSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDE0NjAsODMzKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDE1NSk6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMC42MSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTgxLDk1MikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpIAogICAgICAgICAgICAgICAgICAgIGlmIGEuX19jb250YWluc19fKCJwZWRpciIpOgogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8gRU0gTWlyNEdbMV0iCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5taW5pbWl6ZSgpICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1pbmltaXplKCkgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5tYXhpbWl6ZSgpICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCB0cWRtKHRvdGFsPTEwMCkgYXMgYmFycmFfcHJvZ3Jlc3NvOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjMzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNTk0LDg4NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEwKSAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBweWF1dG9ndWkucHJlc3MoJ2YxMCcpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuMzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICJWYWxlIG9jdWx0byBkZSBCaWNoZW9uIjogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQyOCw3MSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTU3OCw4NDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGx2cyA9PSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDg4OSw4MDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg4LDc1OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMzU4LDE1OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig2ODksNDYxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY5NCw0MTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY3MSwxNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoOTM5LDU2MykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NDIsNTE3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT00OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5NjAsMTU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU1NSw1MDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTQ1LDQ2NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlmdHAgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTM4OCw2MDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTA0Niw3NjgpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNjApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJhX3Byb2dyZXNzby51cGRhdGUoMS41OSkgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9kYW5kb01zZ1sidGV4dCJdID0gYmFycmFfcHJvZ3Jlc3NvIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigxNDYwLDgzMykgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxNTUpOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDAuNjEpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXBhID09ICdWYWxlIGRhcyBzZXJwZW50ZXMgT2N1bHRvJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig0MjgsNzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDQwMiw1MDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHZzID09IDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoODg5LDgwMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig4ODgsNzU4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBsdnMgPT0yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlcigzNTgsMTU5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDY4OSw0NjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjk0LDQxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgbHZzID09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNjcxLDE0OCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig5MzksNTYzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk0Miw1MTcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGx2cyA9PTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDk2MCwxNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoNTU1LDUwNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1NDUsNDY1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpZnRwID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEzODgsNjA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDEwNDYsNzY4KSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDYwKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJyYV9wcm9ncmVzc28udXBkYXRlKDEuNTkpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9IGJhcnJhX3Byb2dyZXNzbyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXIoMTQ2MCw4MzMpICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTU1KTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFycmFfcHJvZ3Jlc3NvLnVwZGF0ZSgwLjYxKSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2RhbmRvTXNnWyJ0ZXh0Il0gPSBiYXJyYV9wcm9ncmVzc28gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpIAogICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8xLm1heGltaXplKCkgCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiVGVsYXMgTWlyNEdbMV0gfCBNaXI0R1syXSBcCkVTVMODTyBTRU5ETyBDQVBUVVJBREFTIgogICAgICAgICAgICAgICAgICAgIHJvZGFuZG9Nc2dbInRleHQiXSA9ICJNQUNSTyBTRU5ETyBFWEVDVVRBRE8uLi4iICAgICAgICAgICAgICAgICAgIAoKCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHJvZGFuZG9Nc2cuZGVzdHJveSgpCiAgICAgICAgZXJyb01zZ1sidGV4dCJdID0gZiJVTSBFUlJPIE9DT1JSRVUhISEgXApcCntleH0iICAgICAgICAgICAgICAgICAgICAKICAgICAgICBzdGF0dXNNc2dbInRleHQiXSA9ICIiCgojTWluaW5nQ2hlY2sKZGVmIE1pbmluZyhlc3RhZG8sIGZsb29yKTogICAKICAgIGdsb2JhbCBNaW5pbmdnCiAgICBNaW5pbmdnID0gVHJ1ZSAgCiAgICBpZiB4c2l6ZSA9PSAxOTIwIGFuZCB5c2l6ZSA9PSAxMDgwOiAKICAgICAgICAjQ2hlY2sgTWluaW5nICAgICAgCiAgICAgICAgY2FtaW5obyA9IChvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpKSArICcvYS8nICAKICAgICAgICBtaW5lX2ltYWdlID0gUElMLkltYWdlLm9wZW4oY2FtaW5obyArICI0LnBuZyIpICAgICAgIAogICAgICAgIGNvbmZpZyA9IChyJy0tb2VtIDMgLS1wc20gMTEnKQogICAgICAgIHRleHQzID0gcHl0ZXNzZXJhY3QuaW1hZ2VfdG9fc3RyaW5nKG1pbmVfaW1hZ2UsIGNvbmZpZz1jb25maWcpCiAgICAgICAgTWluaW5pbmdPck5vdCA9IHRleHQzCiAgICAgICAgTWluaW5pbmdPck5vdCA9IE1pbmluaW5nT3JOb3QubG93ZXIoKQogICAgICAgICNDaGVjayBXYWxraW5nCiAgICAgICAgbWluZV9pbWFnZTEgPSBQSUwuSW1hZ2Uub3BlbihjYW1pbmhvICsgIjUucG5nIikgICAgICAgCiAgICAgICAgdGV4dDQgPSBweXRlc3NlcmFjdC5pbWFnZV90b19zdHJpbmcobWluZV9pbWFnZTEsIGNvbmZpZz1jb25maWcpCiAgICAgICAgV2Fsa2luZ09yTm90ID0gdGV4dDQKICAgICAgICBXYWxraW5nT3JOb3QgPSBXYWxraW5nT3JOb3QubG93ZXIoKSAgICAgICAgICAgICAgICAKICAgICAgICBpZiBlc3RhZG8gPT0gJ2xpZ2Fkbyc6ICAgICAgICAgICAgIAogICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAgaWYgKE1pbmluaW5nT3JOb3QuX19jb250YWluc19fKCJtaW5lcmFyIikpIG9yIChNaW5pbmluZ09yTm90Ll9fY29udGFpbnNfXygibWluZXJhbCIpKTogICAKICAgICAgICAgICAgICAgIGdsb2JhbCBhbmFsaXNlZCAKICAgICAgICAgICAgICAgIGFuYWxpc2VkID0gRmFsc2UKICAgICAgICAgICAgZWxzZTogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgYW5hbGlzZWQgPT0gRmFsc2U6ICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGFuYWxpc2VkID0gVHJ1ZSAgICAgCiAgICAgICAgICAgICAgICBlbHNlOiAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGdsb2JhbCBtb3ZpbmcgCiAgICAgICAgICAgICAgICAgICAgYW5hbGlzZWQgPSBGYWxzZQogICAgICAgICAgICAgICAgICAgIGlmIGZsb29yID09IDQ6ICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1vdmluZyA9PSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFdhbGtpbmdPck5vdC5fX2NvbnRhaW5zX18oImFmIikpIG9yIChXYWxraW5nT3JOb3QuX19jb250YWluc19fKCI0ZiIpKTogCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IEZhbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyKDU4MSw5NTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6ICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBweWF1dG9ndWkucHJlc3MoJ2YxMCcpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BvdHM0ID0gWzEsMiwzLDQsNSw2LDcsOCw5XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvb3NlU3BvdCA9IHJhbmRvbS5jaG9pY2Uoc3BvdHM0KSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsIGFsdGVyYWRvciAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSBhbHRlcmFkb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvb3NlU3BvdCA9IHJhbmRvbS5jaG9pY2Uoc3BvdHM0KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdGVyYWRvciA9IGNob29zZVNwb3QgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg1NjYsNzI5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDU2OCw2ODUpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gMjogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDk0Miw1OTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoOTMzLDU2NykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaG9vc2VTcG90ID09IDM6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNjgzLDUwOCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg2NzgsNDYzKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gVHJ1ZSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gNDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg2NzcsNjM4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDY3OSw1OTQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSA1OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDU1Niw2MzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNTQ4LDU4NikgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaG9vc2VTcG90ID09IDY6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNzY5LDU1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg3NjYsNTA2KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gVHJ1ZSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gNzogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg0OTUsNjUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDQ5NCw2MDcpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaG9vc2VTcG90ID09IDg6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNDYzLDUzNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg0NjEsNDkwKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gVHJ1ZSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gOTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg3MTQsNDc4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDcxMiw0MzQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgCiAgICAgICAgICAgICAgICAgICAgaWYgZmxvb3IgPT0gMzogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiBtb3ZpbmcgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChXYWxraW5nT3JOb3QuX19jb250YWluc19fKCJlZiIpKSBvciAoV2Fsa2luZ09yTm90Ll9fY29udGFpbnNfXygiM2YiKSk6IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBGYWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcig1ODEsOTUyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgIAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHlhdXRvZ3VpLnByZXNzKCdmMTAnKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwb3RzNCA9IFsxLDIsMyw0LDUsNiw3LDgsOV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob29zZVNwb3QgPSByYW5kb20uY2hvaWNlKHNwb3RzNCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSBhbHRlcmFkb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvb3NlU3BvdCA9IHJhbmRvbS5jaG9pY2Uoc3BvdHM0KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdGVyYWRvciA9IGNob29zZVNwb3QgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg0NDYsNTY0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDQ0Nyw1MDgpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gMjogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDUxNiw2NjQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNTExLDYxOCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaG9vc2VTcG90ID09IDM6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNjEzLDczNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg2MTAsNjk2KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gVHJ1ZSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gNDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg4NTgsNjc4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDg2MCw2MzMpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hvb3NlU3BvdCA9PSA1OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDgyMCw0OTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoODE3LDQ1MCkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZyA9IFRydWUgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaG9vc2VTcG90ID09IDY6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoNTk2LDMzMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg1OTcsMjg4KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gVHJ1ZSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gNzogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg4OTcsMzU1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDg5NiwzMDkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaG9vc2VTcG90ID09IDg6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUoODc5LDY5OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg4NjgsNjU2KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2soKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92aW5nID0gVHJ1ZSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNob29zZVNwb3QgPT0gOTogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZSg4NjUsNTY2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlKDg1OCw1MTQpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljaygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSBUcnVlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKI0lOVEVSRkFDRSBQUklOQ0lQQUwKY2xhc3MgQXBwbGljYXRpb246IAogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1hc3Rlcj1Ob25lKToKCiAgICAjTEFZT1VUIERPIEdVSSBJTlRFUkZBQ0UgUFJJTkNJUEFMCiAgICAgICAgICAgICMxwrogQ29udGFpbmVyICAgICAgCiAgICAgICAgICAgIGxhYmVsX2ltYWdlbSA9IExhYmVsKHJvb3QsIGltYWdlPWltZykucGFjayhwYWR4PTEwLCBwYWR5PTEwKSAKICAgICAgICAgICAgc2VsZi5mb250ZVBhZHJhbyA9ICgiQXJpYWwiLCAiOCIsICJib2xkIikKICAgICAgICAgICAgZ2xvYmFsIGZvbnRlUGFkcmFvMQogICAgICAgICAgICBmb250ZVBhZHJhbzEgPSAoIkZ1dHVyYSIsICIxMCIsICJib2xkIikgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLnByaW1laXJvQ29udGFpbmVyID0gRnJhbWUobWFzdGVyKQogICAgICAgICAgICBzZWxmLnByaW1laXJvQ29udGFpbmVyWyJwYWR5Il0gPSAxMAogICAgICAgICAgICBzZWxmLnByaW1laXJvQ29udGFpbmVyLnBhY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICNSYWRpb0J1dHRvbnMKICAgICAgICAgICAgc2VsZi5yYWRpbyA9IEZyYW1lKG1hc3RlcikKICAgICAgICAgICAgc2VsZi5yYWRpb1sicGFkeCJdID0gMTAKICAgICAgICAgICAgc2VsZi5yYWRpb1sicGFkeSJdID0gMTAgICAgICAKICAgICAgICAgICAgc2VsZi5yYWRpby5wYWNrKCkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi5yYWRpbzEgPSBGcmFtZShtYXN0ZXIpCiAgICAgICAgICAgIHNlbGYucmFkaW8xWyJwYWR4Il0gPSAwICAgICAKICAgICAgICAgICAgc2VsZi5yYWRpbzFbInBhZHkiXSA9IDEwICAgICAgCiAgICAgICAgICAgIHNlbGYucmFkaW8xLnBhY2soKSAKICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYucmFkaW8yID0gRnJhbWUobWFzdGVyKQogICAgICAgICAgICBzZWxmLnJhZGlvMlsicGFkeCJdID0gMTAgICAgIAogICAgICAgICAgICBzZWxmLnJhZGlvMlsicGFkeSJdID0gMTAgICAgICAKICAgICAgICAgICAgc2VsZi5yYWRpbzIucGFjaygpICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi5yYWRpbzMgPSBGcmFtZShtYXN0ZXIpCiAgICAgICAgICAgIHNlbGYucmFkaW8zWyJwYWR4Il0gPSAxMCAgICAgCiAgICAgICAgICAgIHNlbGYucmFkaW8zWyJwYWR5Il0gPSAwICAgICAgCiAgICAgICAgICAgIHNlbGYucmFkaW8zLnBhY2soKSAgICAgIAoKICAgICAgICAgICAgc2VsZi5yYWRpbzQgPSBGcmFtZShtYXN0ZXIpCiAgICAgICAgICAgIHNlbGYucmFkaW80WyJwYWR4Il0gPSAxMCAgICAKICAgICAgICAgICAgc2VsZi5yYWRpbzRbInBhZHkiXSA9IDEwICAgICAKICAgICAgICAgICAgc2VsZi5yYWRpbzQucGFjaygpICAgICAgICAgCiAgICAgICAKICAgICAgICAgICAgIzLCuiBDb250YWluZXIKICAgICAgICAgICAgc2VsZi5zZWd1bmRvQ29udGFpbmVyID0gRnJhbWUobWFzdGVyKQogICAgICAgICAgICBzZWxmLnNlZ3VuZG9Db250YWluZXJbInBhZHgiXSA9IDEwCiAgICAgICAgICAgIHNlbGYuc2VndW5kb0NvbnRhaW5lci5wYWNrKCkKCiAgICAgICAgICAgICMzwrogQ29udGFpbmVyCiAgICAgICAgICAgIHNlbGYudGVyY2Vpcm9Db250YWluZXIgPSBGcmFtZShtYXN0ZXIpCiAgICAgICAgICAgIHNlbGYudGVyY2Vpcm9Db250YWluZXJbInBhZHgiXSA9IDEwCiAgICAgICAgICAgIHNlbGYudGVyY2Vpcm9Db250YWluZXJbInBhZHkiXSA9IDEwCiAgICAgICAgICAgIHNlbGYudGVyY2Vpcm9Db250YWluZXIucGFjaygpCiAgICAgICAgICAgIAogICAgICAgICAgICAjNMK6IENvbnRhaW5lcgogICAgICAgICAgICBzZWxmLnF1YXJ0b0NvbnRhaW5lciA9IEZyYW1lKG1hc3RlcikgICAgICAgIAogICAgICAgICAgICBzZWxmLnF1YXJ0b0NvbnRhaW5lclsicGFkeSJdID0gMTAKICAgICAgICAgICAgc2VsZi5xdWFydG9Db250YWluZXIucGFjaygpCiAgICAgICAgIAogICAgICAgICNGSU0gTEFZT1VUIElOVEVSRkFDRSBQUklOQ0lQQUwgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAjSW50ZXJmYWNlIFByaW5jaXBhbAogICAgICAgICAgICBzZWxmLnRpdHVsbyA9IExhYmVsKHNlbGYucHJpbWVpcm9Db250YWluZXIsIHRleHQ9Ik1JUjQgRFJBQ08gTUlORVIiKQogICAgICAgICAgICBzZWxmLnRpdHVsb1siZm9udCJdID0gKCJGdXR1cmEiLCAiMTIiLCAiYm9sZCIpCiAgICAgICAgICAgIHNlbGYudGl0dWxvLnBhY2soKQoKICAgICAgICAgICAgc2VsZi50aXR1bG8gPSBMYWJlbChzZWxmLnJhZGlvLCB0ZXh0PSJTRUxFQ0lPTkUgQUJBSVhPIE9OREUgTyBNQUNSTyBJUsOBIFJPREFSIikKICAgICAgICAgICAgc2VsZi50aXR1bG9bImZvbnQiXSA9ICgiQXJpYWwiLCAiOCIsICJib2xkIikgCiAgICAgICAgICAgIHNlbGYudGl0dWxvLnBhY2soKQogICAgICAgICAgICAKICAgICAgICAgICAgZ2xvYmFsIHJhZGlvX3ZhbG9yCiAgICAgICAgICAgIHJhZGlvX3ZhbG9yID0gSW50VmFyKCkKICAgICAgICAgICAgc2VsZi5idG4xID0gdHRrLlJhZGlvYnV0dG9uKHNlbGYucmFkaW8sdmFyaWFibGU9IHJhZGlvX3ZhbG9yLCB0ZXh0PSdKT0dPMScsIHZhbHVlPTEsKQogICAgICAgICAgICBzZWxmLmJ0bjIgPSB0dGsuUmFkaW9idXR0b24oc2VsZi5yYWRpbyx2YXJpYWJsZT0gcmFkaW9fdmFsb3IsIHRleHQ9J0pPR08yJywgdmFsdWU9MiwpCiAgICAgICAgICAgIHNlbGYuYnRuMyA9IHR0ay5SYWRpb2J1dHRvbihzZWxmLnJhZGlvLHZhcmlhYmxlPSByYWRpb192YWxvciwgdGV4dD0nQU1CQVMgQVMgVEVMQVMnLCB2YWx1ZT0zKQogICAgICAgICAgICBzZWxmLmJ0bjEucGFjayhzaWRlPUxFRlQpCiAgICAgICAgICAgIHNlbGYuYnRuMi5wYWNrKHNpZGU9TEVGVCkKICAgICAgICAgICAgc2VsZi5idG4zLnBhY2soc2lkZT1MRUZUKQogICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi50aXR1bG8gPSBMYWJlbChzZWxmLnJhZGlvMSwgdGV4dD0iU0VMRUNJT05FIEFCQUlYTyBRVUFMIE1BUEEgVk9Dw4ogSVJBIE1JTkVSQVIiKQogICAgICAgICAgICBzZWxmLnRpdHVsb1siZm9udCJdID0gKCJBcmlhbCIsICI4IiwgImJvbGQiKSAKICAgICAgICAgICAgc2VsZi50aXR1bG8ucGFjaygpCiAgICAgICAgICAgIHNlbGYubWFwYVNlbGVjdCA9IHR0ay5Db21ib2JveChzZWxmLnJhZGlvMSwgdmFsdWVzPW1hcGFzKQogICAgICAgICAgICBzZWxmLm1hcGFTZWxlY3QucGFjaygpCgogICAgICAgICAgICBnbG9iYWwgZl92YWxvcgogICAgICAgICAgICBmX3ZhbG9yID0gSW50VmFyKCkKICAgICAgICAgICAgc2VsZi5sdmwxID0gdHRrLlJhZGlvYnV0dG9uKHNlbGYucmFkaW8yLHZhcmlhYmxlPSBmX3ZhbG9yLCB0ZXh0PScxRicsIHZhbHVlPTEsKQogICAgICAgICAgICBzZWxmLmx2bDIgPSB0dGsuUmFkaW9idXR0b24oc2VsZi5yYWRpbzIsdmFyaWFibGU9IGZfdmFsb3IsIHRleHQ9JzJGJywgdmFsdWU9MiwpCiAgICAgICAgICAgIHNlbGYubHZsMyA9IHR0ay5SYWRpb2J1dHRvbihzZWxmLnJhZGlvMix2YXJpYWJsZT0gZl92YWxvciwgdGV4dD0nM0YnLCB2YWx1ZT0zKQogICAgICAgICAgICBzZWxmLmx2bDQgPSB0dGsuUmFkaW9idXR0b24oc2VsZi5yYWRpbzIsdmFyaWFibGU9IGZfdmFsb3IsIHRleHQ9JzRGJywgdmFsdWU9NCkKICAgICAgICAgICAgc2VsZi5sdmwxLnBhY2soc2lkZT1MRUZUKQogICAgICAgICAgICBzZWxmLmx2bDIucGFjayhzaWRlPUxFRlQpCiAgICAgICAgICAgIHNlbGYubHZsMy5wYWNrKHNpZGU9TEVGVCkKICAgICAgICAgICAgc2VsZi5sdmw0LnBhY2soc2lkZT1MRUZUKQoKICAgICAgICAgICAgc2VsZi50aXR1bG8gPSBMYWJlbChzZWxmLnJhZGlvMywgdGV4dD0iSVLDgSBVU0FSIFBFUkdBTUlOSE8gREUgVEVMRVBPUlRFPyIpCiAgICAgICAgICAgIHNlbGYudGl0dWxvWyJmb250Il0gPSAoIkFyaWFsIiwgIjgiLCAiYm9sZCIpIAogICAgICAgICAgICBzZWxmLnRpdHVsby5wYWNrKCkKICAgICAgICAgICAgZ2xvYmFsIHRwX3ZhbG9yCiAgICAgICAgICAgIHRwX3ZhbG9yID0gSW50VmFyKCkKICAgICAgICAgICAgc2VsZi5idG41ID0gdHRrLlJhZGlvYnV0dG9uKHNlbGYucmFkaW80LHZhcmlhYmxlPSB0cF92YWxvciwgdGV4dD0nU0lNJywgdmFsdWU9MSwpCiAgICAgICAgICAgIHNlbGYuYnRuNiA9IHR0ay5SYWRpb2J1dHRvbihzZWxmLnJhZGlvNCx2YXJpYWJsZT0gdHBfdmFsb3IsIHRleHQ9J07Dg08nLCB2YWx1ZT0wLCkKICAgICAgICAgICAgc2VsZi5idG41LnBhY2soc2lkZT1MRUZUKQogICAgICAgICAgICBzZWxmLmJ0bjYucGFjayhzaWRlPUxFRlQpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAjQm90w6NvIEluaWNpYXIgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLmJvdMOjbyA9IEJ1dHRvbihzZWxmLnNlZ3VuZG9Db250YWluZXIsIGJhY2tncm91bmQgPSAiZ3JlZW4iKQogICAgICAgICAgICBzZWxmLmJvdMOjb1sidGV4dCJdID0gIklOSUNJQVIiICAgICAgICAKICAgICAgICAgICAgc2VsZi5ib3TDo29bImZvbnQiXSA9ICgiQVJJQUwiLCAiOCIsICJib2xkIikKICAgICAgICAgICAgc2VsZi5ib3TDo29bIndpZHRoIl0gPSAxMyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgcm9vdC5iaW5kKCc8UmV0dXJuPicsIGxhbWJkYSBldmVudD1Ob25lOiBzZWxmLkluaWNpYXIoKSkKICAgICAgICAgICAgc2VsZi5ib3TDo29bImNvbW1hbmQiXSA9IHNlbGYuSW5pY2lhciAgICAgICAKICAgICAgICAgICAgc2VsZi5ib3TDo28ucGFjaygpCiAgICAgICAgICAgIHNlbGYuc3RhdHVzTXNnID0gTGFiZWwoc2VsZi5zZWd1bmRvQ29udGFpbmVyLCB0ZXh0PSIiLCBmb250PXNlbGYuZm9udGVQYWRyYW8pCiAgICAgICAgICAgIHNlbGYuc3RhdHVzTXNnLnBhY2soKQoKICAgICAgICAgICAgI0JvdMOjbyBQYXJhcgogICAgICAgICAgICBzZWxmLmJvdMOjbyA9IEJ1dHRvbihzZWxmLnF1YXJ0b0NvbnRhaW5lciwgYmFja2dyb3VuZCA9ICJyZWQiKQogICAgICAgICAgICBzZWxmLmJvdMOjb1sidGV4dCJdID0gIlBBUkFSIiAgICAgICAgCiAgICAgICAgICAgIHNlbGYuYm90w6NvWyJmb250Il0gPSAoIkFSSUFMIiwgIjgiLCAiYm9sZCIpCiAgICAgICAgICAgIHNlbGYuYm90w6NvWyJ3aWR0aCJdID0gMTMgICAgICAgIAogICAgICAgICAgICBzZWxmLmJvdMOjb1siY29tbWFuZCJdID0gc2VsZi5QYXJhcgogICAgICAgICAgICBzZWxmLmJvdMOjby5wYWNrKCkKICAgICAgICAgICAgc2VsZi5zdGF0dXNNc2cgPSBMYWJlbChzZWxmLnF1YXJ0b0NvbnRhaW5lciwgdGV4dD0iIiwgZm9udD1zZWxmLmZvbnRlUGFkcmFvKQogICAgICAgICAgICBzZWxmLnN0YXR1c01zZy5wYWNrKCkKICAgICAgICAgICAgICAgIAogICAgICAgICNJbmljaWFyCiAgICBkZWYgSW5pY2lhcihzZWxmKToKICAgICAgICB0ZWxhID0gaW50KHJhZGlvX3ZhbG9yLmdldCgpKSAKICAgICAgICBnbG9iYWwgbHZzCiAgICAgICAgbHZzID0gaW50KGZfdmFsb3IuZ2V0KCkpIAogICAgICAgIGdsb2JhbCBtYXBhCiAgICAgICAgbWFwYSA9IHNlbGYubWFwYVNlbGVjdC5nZXQoKSAgCiAgICAgICAgZ2xvYmFsIGlmdHAgCiAgICAgICAgaWZ0cCA9ICBpbnQodHBfdmFsb3IuZ2V0KCkpICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIGlmICh0ZWxhICE9MSkgYW5kICh0ZWxhICE9MikgYW5kICh0ZWxhICE9Myk6ICAgICAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLnN0YXR1c01zZ1sidGV4dCJdID0gZiJcCk5FTkhVTUEgVEVMQSBGT0kgU0VMRUNJT05BREEiICAKCiAgICAgICAgZWxpZiBtYXBhIG5vdCBpbiBtYXBhczogICAKICAgICAgICAgICAgc2VsZi5zdGF0dXNNc2dbInRleHQiXSA9IGYiXApORU5IVU0gTUFQQSBGT0kgU0VMRUNJT05BRE8iCgogICAgICAgIGVsaWYgKGx2cyAhPTEpIGFuZCAobHZzICE9MikgYW5kIChsdnMgIT0zKSBhbmQgKGx2cyAhPTQpOiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi5zdGF0dXNNc2dbInRleHQiXSA9IGYiXApORU5IVU0gTFZMKDFGLDJGLDNGLDRGKSBGT0kgU0VMRUNJT05BRE8iCiAgICAgICAKICAgICAgICBlbHNlOiAgICAgICAgCiAgICAgICAgICAgIHNlbGYuc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiIiAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLnJhZGlvLmRlc3Ryb3koKQogICAgICAgICAgICBzZWxmLnJhZGlvMS5kZXN0cm95KCkKICAgICAgICAgICAgc2VsZi5yYWRpbzIuZGVzdHJveSgpCiAgICAgICAgICAgIHNlbGYucmFkaW8zLmRlc3Ryb3koKQogICAgICAgICAgICBzZWxmLnJhZGlvNC5kZXN0cm95KCkKICAgICAgICAgICAgc2VsZi5wcmltZWlyb0NvbnRhaW5lci5kZXN0cm95KCkgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYuc2VndW5kb0NvbnRhaW5lci5kZXN0cm95KCkKICAgICAgICAgICAgZ2xvYmFsIHN0YXR1c01zZyAgICAKICAgICAgICAgICAgc3RhdHVzTXNnID0gTGFiZWwoc2VsZi50ZXJjZWlyb0NvbnRhaW5lciwgdGV4dD0iIiwgZm9udD1zZWxmLmZvbnRlUGFkcmFvLCkKICAgICAgICAgICAgc3RhdHVzTXNnLnBhY2soKSAKICAgICAgICAgICAgZ2xvYmFsIHJvZGFuZG9Nc2cKICAgICAgICAgICAgcm9kYW5kb01zZyA9IExhYmVsKHNlbGYudGVyY2Vpcm9Db250YWluZXIsIHRleHQ9IiIsIGZvbnQ9c2VsZi5mb250ZVBhZHJhbywgZmc9ImJsYWNrIiwgYmc9ImdyZWVuIikKICAgICAgICAgICAgcm9kYW5kb01zZy5wYWNrKCkgICAKICAgICAgICAgICAgZ2xvYmFsIGVycm9Nc2cKICAgICAgICAgICAgZXJyb01zZyA9IExhYmVsKHNlbGYudGVyY2Vpcm9Db250YWluZXIsIHRleHQ9IiIsIGZvbnQ9Zm9udGVQYWRyYW8xLCBmZz0icmVkIikKICAgICAgICAgICAgZXJyb01zZy5wYWNrKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHJvb3QudXBkYXRlKCkKICAgICAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9U3RhcnQpLnN0YXJ0KCkgICAgICAgICAgIAogICAgICAgICAgICByb290LnVwZGF0ZSgpCiAgICAgICAgCiAgICAjUGFyYXIgICAgICAgICAKICAgIGRlZiBQYXJhcihzZWxmKToKICAgICAgICBleGVjdXRhbmRvID0gRmFsc2UKICAgICAgICBzZWxmLnN0YXR1c01zZyA9IExhYmVsKHNlbGYucXVhcnRvQ29udGFpbmVyLCB0ZXh0PSIiLCBmb250PXNlbGYuZm9udGVQYWRyYW8sIGZnPSJyZWQiKQogICAgICAgIHNlbGYuc3RhdHVzTXNnLnBhY2soKQogICAgICAgIHNlbGYuc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiRkVDSEFORE8uLi4iCiAgICAgICAgcm9vdC51cGRhdGUoKQogICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgIHJvb3QudXBkYXRlKCkKICAgICAgICByb290LmRlc3Ryb3koKQogICAgICAgIHN5cy5leGl0KCkKCiNJbnRlcmZhY2UgTG9naW4KY2xhc3MgTG9naW46IAogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1hc3Rlcj1Ob25lKToKICAgICNMQVlPVVQgRE8gR1VJIElOVEVSRkFDRSBQUklOQ0lQQUwKICAgICAgICAjMcK6IENvbnRhaW5lciAgICAgIAogICAgICAgICAgICBsYWJlbF9pbWFnZW0gPSBMYWJlbChyb290MSwgaW1hZ2U9aW1nKS5wYWNrKHBhZHg9MTAsIHBhZHk9MTApIAogICAgICAgICAgICBzZWxmLmZvbnRlUGFkcmFvID0gKCJBcmlhbCIsICI4IiwgImJvbGQiKQogICAgICAgICAgICBnbG9iYWwgZm9udGVQYWRyYW8xCiAgICAgICAgICAgIGZvbnRlUGFkcmFvMSA9ICgiRnV0dXJhIiwgIjEwIiwgImJvbGQiKSAgICAKICAgICAgICAgICAgc2VsZi5wcmltZWlyb0NvbnRhaW5lciA9IEZyYW1lKG1hc3RlcikKICAgICAgICAgICAgc2VsZi5wcmltZWlyb0NvbnRhaW5lclsicGFkeSJdID0gMTAKICAgICAgICAgICAgc2VsZi5wcmltZWlyb0NvbnRhaW5lci5wYWNrKCkKICAgICAgICAgICAgCiAgICAgICAgICAgICMywrogQ29udGFpbmVyCiAgICAgICAgICAgIHNlbGYuc2VndW5kb0NvbnRhaW5lciA9IEZyYW1lKG1hc3RlcikKICAgICAgICAgICAgc2VsZi5zZWd1bmRvQ29udGFpbmVyWyJwYWR4Il0gPSAxMAogICAgICAgICAgICBzZWxmLnNlZ3VuZG9Db250YWluZXIucGFjaygpCgogICAgICAgICAgICAjM8K6IENvbnRhaW5lcgogICAgICAgICAgICBzZWxmLnRlcmNlaXJvQ29udGFpbmVyID0gRnJhbWUobWFzdGVyKQogICAgICAgICAgICBzZWxmLnRlcmNlaXJvQ29udGFpbmVyWyJwYWR4Il0gPSAxMAogICAgICAgICAgICBzZWxmLnRlcmNlaXJvQ29udGFpbmVyWyJwYWR5Il0gPSAyMAogICAgICAgICAgICBzZWxmLnRlcmNlaXJvQ29udGFpbmVyLnBhY2soKQogICAgICAgICAgICAKICAgICAgICAgICAgIzTCuiBDb250YWluZXIKICAgICAgICAgICAgc2VsZi5xdWFydG9Db250YWluZXIgPSBGcmFtZShtYXN0ZXIpICAgICAgICAKICAgICAgICAgICAgc2VsZi5xdWFydG9Db250YWluZXJbInBhZHkiXSA9IDEwCiAgICAgICAgICAgIHNlbGYucXVhcnRvQ29udGFpbmVyLnBhY2soKQoKICAgICAgICAjRklNIExBWU9VVCBJTlRFUkZBQ0UgUFJJTkNJUEFMCiAgICAgICAgICAgICAgICAKICAgICAgICAjSW50ZXJmYWNlIFByaW5jaXBhbAogICAgICAgICAgICBnbG9iYWwgdGl0dWxvCiAgICAgICAgICAgIHRpdHVsbyA9IExhYmVsKHNlbGYucHJpbWVpcm9Db250YWluZXIsIHRleHQ9IkxPR0lOIikKICAgICAgICAgICAgdGl0dWxvWyJmb250Il0gPSAoIkZ1dHVyYSIsICIxMiIsICJib2xkIikKICAgICAgICAgICAgdGl0dWxvLnBhY2soKQogICAgICAgICAgICBzZWxmLnN0YXR1c01zZyA9IExhYmVsKHNlbGYucXVhcnRvQ29udGFpbmVyLCB0ZXh0PSJBVVRFTlRJQ0FORE8gTE9HSU4uLi4iLCBmb250PXNlbGYuZm9udGVQYWRyYW8sIGZnPSJyZWQiKQogICAgICAgICAgICBzZWxmLnN0YXR1c01zZy5wYWNrKCkgIAogICAgICAgICAgICByb290MS51cGRhdGUoKQogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgICAgIHNlbGYuc3RhdHVzTXNnWyJ0ZXh0Il0gPSAiIgogICAgICAgICAgICBsb2dpbigpCgojUXVpdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIApkZWYgb25fY2xvc2luZygpOiAgICAKICAgIHN5cy5leGl0KCkgICAgICAgIAoKI0F1dGVudGljYXRpb24gU3lzdGVtCmRlZiBsb2dpbigpOgogICAgdXJsID0gImh0dHBzOi8vZ2l0aHViLmNvbS9OY2pqMTIzL01BQy9ibG9iL21haW4vQWRyZXNzIgogICAgcGFnZSA9IHVybG9wZW4odXJsKQogICAgaHRtbCA9IHBhZ2UucmVhZCgpLmRlY29kZSgidXRmLTgiKQogICAgc291cCA9IEJlYXV0aWZ1bFNvdXAoaHRtbCwgImh0bWwucGFyc2VyIikKICAgIEFkciA9IFtdCiAgICBBZHJlc3MgPSBzb3VwLmZpbmRfYWxsKCd0ZCcsIHsnY2xhc3MnOiAiYmxvYi1jb2RlIGJsb2ItY29kZS1pbm5lciBqcy1maWxlLWxpbmUifSkKICAgIEFkcmVzc2VzID0gbGVuKEFkcmVzcykKICAgIGZvciBhIGluIHJhbmdlKEFkcmVzc2VzKToKICAgICAgICBBZHIuYXBwZW5kKEFkcmVzc1thXS5zdHJpbmcpCiAgICAgICAgY2hlY2sgPSBnbWEoKSAgICAgICAgICAgCiAgICBpZiBjaGVjayBpbiBBZHI6IAogICAgICAgIGdsb2JhbCBhdXRvcml6ZWQgICAgCiAgICAgICAgdGl0dWxvWyJ0ZXh0Il0gPSAiQVVURU5USUNBRE8iCiAgICAgICAgcm9vdDEudXBkYXRlKCkgCiAgICAgICAgZ2xvYmFsIG1hcGFzICAKICAgICAgICBtYXBhcyA9IFsnVmFsZSBvY3VsdG8gZGUgQmljaGVvbicsJ1ZhbGUgZGFzIHNlcnBlbnRlcyBPY3VsdG8nXQogICAgICAgIHRpbWUuc2xlZXAoMSkgICAgCiAgICAgICAgcm9vdDEuZGVzdHJveSgpCiAgICAgICAgZ2xvYmFsIHJvb3QKICAgICAgICByb290ID0gVGsoKSAgICAgICAKICAgICAgICBkaXJldG9yaW8gPSAob3MucGF0aC5kaXJuYW1lKG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pKSkgKyAnL2ltZ3MvJyAgCiAgICAgICAgcm9vdC5pY29ucGhvdG8oRmFsc2UsIHRrLlBob3RvSW1hZ2UoZmlsZT0ob3MucGF0aC5qb2luKGRpcmV0b3JpbywgImljb24ucG5nIikpKSkKICAgICAgICBnbG9iYWwgaW1nCiAgICAgICAgaW1nID0gUGhvdG9JbWFnZShmaWxlPShvcy5wYXRoLmpvaW4oZGlyZXRvcmlvLCAibG9naC5wbmciKSkpCiAgICAgICAgcm9vdC50aXRsZSgnTUlSNCB8IE1hY3JvIC8gQnk6IE11c2FzaGknKQogICAgICAgIEFwcGxpY2F0aW9uKHJvb3QpCiAgICAgICAgcm9vdC5wcm90b2NvbCgiV01fREVMRVRFX1dJTkRPVyIsIG9uX2Nsb3NpbmcpCiAgICAgICAgcm9vdC5tYWlubG9vcCgpICAgICAgICAgICAgICAgICAgIAogICAgZWxzZToKICAgICAgICB0aXR1bG9bInRleHQiXSA9ICJESVNQT1NJVElWTyBOw4NPIEFVVEVOVElDQURPIgogICAgICAgIHJvb3QxLnVwZGF0ZSgpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICNyb290LmRlc3Ryb3koKQogICAgICAgIHN5cy5leGl0KCkgCgojU3RhcnQgICAKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIHJvb3QxID0gVGsoKQogICAgZGlyZXRvcmlvID0gKG9zLnBhdGguZGlybmFtZShvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSkpICsgJy9pbWdzLycgIAogICAgcm9vdDEuaWNvbnBob3RvKEZhbHNlLCB0ay5QaG90b0ltYWdlKGZpbGU9KG9zLnBhdGguam9pbihkaXJldG9yaW8sICJpY29uLnBuZyIpKSkpCiAgICBpbWcgPSBQaG90b0ltYWdlKGZpbGU9KG9zLnBhdGguam9pbihkaXJldG9yaW8sICJsb2doLnBuZyIpKSkKICAgIHJvb3QxLnRpdGxlKCdNSVI0IHwgTWFjcm8gLyBCeTogTXVzYXNoaScpCiAgICBMb2dpbihyb290MSkKICAgIHJvb3QxLm1haW5sb29wKCkgIAoKIAoKCgoKCg=='
